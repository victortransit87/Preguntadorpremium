<html lang="es"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LMA Exam Prep (Local)</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin="" src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin="" src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel para traducir JSX en el navegador -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
    </style>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: { sans: ['Inter', 'sans-serif'] },
          }
        }
      }
    </script>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "vite": "https://aistudiocdn.com/vite@^7.2.4",
    "@vitejs/plugin-react": "https://aistudiocdn.com/@vitejs/plugin-react@^5.1.1"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:Inter, sans-serif;font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.mx-auto{margin-left:auto;margin-right:auto}.mb-10{margin-bottom:2.5rem}.mb-3{margin-bottom:0.75rem}.mb-8{margin-bottom:2rem}.mt-4{margin-top:1rem}.mb-4{margin-bottom:1rem}.mt-1{margin-top:0.25rem}.mt-2{margin-top:0.5rem}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-screen{height:100vh}.max-h-\[600px\]{max-height:600px}.min-h-screen{min-height:100vh}.w-full{width:100%}.max-w-4xl{max-width:56rem}.max-w-md{max-width:28rem}.flex-1{flex:1 1 0%}.cursor-pointer{cursor:pointer}.grid-cols-1{grid-template-columns:repeat(1, minmax(0, 1fr))}.grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.gap-1{gap:0.25rem}.gap-2{gap:0.5rem}.space-y-2 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem * var(--tw-space-y-reverse))}.space-y-6 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.overflow-y-auto{overflow-y:auto}.whitespace-nowrap{white-space:nowrap}.rounded-2xl{border-radius:1rem}.rounded-lg{border-radius:0.5rem}.rounded-md{border-radius:0.375rem}.rounded-xl{border-radius:0.75rem}.rounded{border-radius:0.25rem}.border{border-width:1px}.border-blue-100{--tw-border-opacity:1;border-color:rgb(219 234 254 / var(--tw-border-opacity, 1))}.border-green-100{--tw-border-opacity:1;border-color:rgb(220 252 231 / var(--tw-border-opacity, 1))}.border-slate-100{--tw-border-opacity:1;border-color:rgb(241 245 249 / var(--tw-border-opacity, 1))}.border-slate-200{--tw-border-opacity:1;border-color:rgb(226 232 240 / var(--tw-border-opacity, 1))}.border-slate-300{--tw-border-opacity:1;border-color:rgb(203 213 225 / var(--tw-border-opacity, 1))}.border-purple-200{--tw-border-opacity:1;border-color:rgb(233 213 255 / var(--tw-border-opacity, 1))}.bg-slate-100{--tw-bg-opacity:1;background-color:rgb(241 245 249 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity:1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity:1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-slate-50{--tw-bg-opacity:1;background-color:rgb(248 250 252 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-amber-100{--tw-bg-opacity:1;background-color:rgb(254 243 199 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-purple-100{--tw-bg-opacity:1;background-color:rgb(243 232 255 / var(--tw-bg-opacity, 1))}.bg-red-100{--tw-bg-opacity:1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-red-600{--tw-bg-opacity:1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.bg-gradient-to-r{background-image:linear-gradient(to right, var(--tw-gradient-stops))}.from-blue-600{--tw-gradient-from:#2563eb var(--tw-gradient-from-position);--tw-gradient-to:rgb(37 99 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.to-indigo-600{--tw-gradient-to:#4f46e5 var(--tw-gradient-to-position)}.to-purple-600{--tw-gradient-to:#9333ea var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.p-1{padding:0.25rem}.p-3{padding:0.75rem}.p-4{padding:1rem}.p-8{padding:2rem}.p-2{padding:0.5rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-2{padding-left:0.5rem;padding-right:0.5rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.py-0\.5{padding-top:0.125rem;padding-bottom:0.125rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.pr-1{padding-right:0.25rem}.text-center{text-align:center}.font-sans{font-family:Inter, sans-serif}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xs{font-size:0.75rem;line-height:1rem}.text-2xl{font-size:1.5rem;line-height:2rem}.font-bold{font-weight:700}.font-extrabold{font-weight:800}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.text-slate-800{--tw-text-opacity:1;color:rgb(30 41 59 / var(--tw-text-opacity, 1))}.text-slate-500{--tw-text-opacity:1;color:rgb(100 116 139 / var(--tw-text-opacity, 1))}.text-blue-400{--tw-text-opacity:1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-green-400{--tw-text-opacity:1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity:1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-red-400{--tw-text-opacity:1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-slate-400{--tw-text-opacity:1;color:rgb(148 163 184 / var(--tw-text-opacity, 1))}.text-slate-700{--tw-text-opacity:1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}.text-transparent{color:transparent}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-amber-800{--tw-text-opacity:1;color:rgb(146 64 14 / var(--tw-text-opacity, 1))}.text-purple-700{--tw-text-opacity:1;color:rgb(126 34 206 / var(--tw-text-opacity, 1))}.text-red-700{--tw-text-opacity:1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.text-red-800{--tw-text-opacity:1;color:rgb(153 27 27 / var(--tw-text-opacity, 1))}.text-slate-600{--tw-text-opacity:1;color:rgb(71 85 105 / var(--tw-text-opacity, 1))}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.shadow{--tw-shadow:0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-shadow{transition-property:box-shadow;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.hover\:-translate-y-1:hover{--tw-translate-y:-0.25rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:bg-blue-100:hover{--tw-bg-opacity:1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-700:hover{--tw-bg-opacity:1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-purple-200:hover{--tw-bg-opacity:1;background-color:rgb(233 213 255 / var(--tw-bg-opacity, 1))}.hover\:bg-red-200:hover{--tw-bg-opacity:1;background-color:rgb(254 202 202 / var(--tw-bg-opacity, 1))}.hover\:bg-red-700:hover{--tw-bg-opacity:1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.hover\:bg-slate-200:hover{--tw-bg-opacity:1;background-color:rgb(226 232 240 / var(--tw-bg-opacity, 1))}.hover\:text-red-600:hover{--tw-text-opacity:1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.hover\:text-slate-800:hover{--tw-text-opacity:1;color:rgb(30 41 59 / var(--tw-text-opacity, 1))}.hover\:shadow-xl:hover{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.hover\:shadow-md:hover{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.focus\:ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.focus\:ring-blue-500:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(59 130 246 / var(--tw-ring-opacity, 1))}.disabled\:opacity-50:disabled{opacity:0.5}@media (min-width: 768px){.md\:grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.md\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.md\:p-12{padding:3rem}.md\:p-8{padding:2rem}}</style><script>"use strict";

function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var _React = React,
  useState = _React.useState,
  useEffect = _React.useEffect,
  useMemo = _React.useMemo,
  useCallback = _React.useCallback;

// --- UTILS: SM2 Algorithm ---
var calculateSM2 = function calculateSM2(question, isCorrect, currentReps) {
  var now = Date.now();
  var DEFAULT_EF = 2.5;
  var prev = currentReps[question.id] || {
    ef: DEFAULT_EF,
    rep: 0,
    interval: 0,
    epigrafe: question.epigrafe,
    next: 0
  };
  var newRep = _objectSpread(_objectSpread({}, prev), {}, {
    lastResult: isCorrect
  });
  if (isCorrect) {
    newRep.rep = prev.rep + 1;
    if (newRep.rep === 1) {
      newRep.interval = 1;
    } else if (newRep.rep === 2) {
      newRep.interval = 6;
    } else {
      newRep.interval = Math.round(prev.interval * prev.ef);
    }
    newRep.ef = Math.max(1.3, prev.ef + 0.1);
    newRep.next = now + newRep.interval * 24 * 60 * 60 * 1000;
  } else {
    newRep.rep = 0;
    newRep.interval = 0;
    newRep.next = now;
  }
  return newRep;
};

// --- HOOK: Question Bank ---
var generateUID = function generateUID() {
  return Math.random().toString(36).substr(2, 9);
};
var INITIAL_QUESTIONS = [{
  id: 'init_1',
  epigrafe: 15,
  question: "¿Cuál es la partícula con carga negativa?",
  options: ["Protón", "Electrón", "Neutrón"],
  answer: 1,
  explanation: "El electrón es una partícula subatómica con una carga eléctrica elemental negativa."
}];
var useQuestionBank = function useQuestionBank() {
  var _useState = useState([]),
    _useState2 = _slicedToArray(_useState, 2),
    questions = _useState2[0],
    setQuestions = _useState2[1];
  var _useState3 = useState({}),
    _useState4 = _slicedToArray(_useState3, 2),
    reps = _useState4[0],
    setReps = _useState4[1];
  var _useState5 = useState(true),
    _useState6 = _slicedToArray(_useState5, 2),
    loading = _useState6[0],
    setLoading = _useState6[1];
  useEffect(function () {
    var storedQ = localStorage.getItem('qBank');
    var storedR = localStorage.getItem('reps');
    if (storedQ) setQuestions(JSON.parse(storedQ));else setQuestions(INITIAL_QUESTIONS);
    if (storedR) setReps(JSON.parse(storedR));
    setLoading(false);
  }, []);
  useEffect(function () {
    if (!loading) localStorage.setItem('qBank', JSON.stringify(questions));
  }, [questions, loading]);
  useEffect(function () {
    if (!loading) localStorage.setItem('reps', JSON.stringify(reps));
  }, [reps, loading]);
  var addQuestion = function addQuestion(q) {
    var newQ = _objectSpread(_objectSpread({}, q), {}, {
      id: generateUID()
    });
    setQuestions(function (prev) {
      return [].concat(_toConsumableArray(prev), [newQ]);
    });
  };
  var updateQuestion = function updateQuestion(id, updated) {
    setQuestions(function (prev) {
      return prev.map(function (q) {
        return q.id === id ? _objectSpread(_objectSpread({}, q), updated) : q;
      });
    });
  };
  var deleteQuestion = function deleteQuestion(id) {
    setQuestions(function (prev) {
      return prev.filter(function (q) {
        return q.id !== id;
      });
    });
    var newReps = _objectSpread({}, reps);
    delete newReps[id];
    setReps(newReps);
  };
  var updateRep = function updateRep(id, data) {
    setReps(function (prev) {
      return _objectSpread(_objectSpread({}, prev), {}, _defineProperty({}, id, data));
    });
  };
  var resetProgress = function resetProgress() {
    return setReps({});
  };
  var importQuestions = function importQuestions(imported) {
    var replace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var valid = imported.filter(function (q) {
      return q.question && q.options && typeof q.answer === 'number';
    });
    var prepared = valid.map(function (q) {
      return _objectSpread(_objectSpread({}, q), {}, {
        id: q.id || generateUID()
      });
    });
    if (replace) {
      setQuestions(prepared);
      setReps({});
    } else {
      setQuestions(function (prev) {
        return [].concat(_toConsumableArray(prev), _toConsumableArray(prepared));
      });
    }
  };
  return {
    questions: questions,
    reps: reps,
    loading: loading,
    addQuestion: addQuestion,
    updateQuestion: updateQuestion,
    deleteQuestion: deleteQuestion,
    updateRep: updateRep,
    resetProgress: resetProgress,
    importQuestions: importQuestions,
    setQuestions: setQuestions
  };
};

// --- COMPONENT: AdminPanel ---
var AdminPanel = function AdminPanel(_ref) {
  var questions = _ref.questions,
    onImport = _ref.onImport,
    onDeleteAll = _ref.onDeleteAll,
    onDeleteEpigrafe = _ref.onDeleteEpigrafe,
    onDeleteQuestion = _ref.onDeleteQuestion,
    onUpdateQuestion = _ref.onUpdateQuestion,
    onExport = _ref.onExport,
    onBack = _ref.onBack;
  var _useState7 = useState(''),
    _useState8 = _slicedToArray(_useState7, 2),
    jsonInput = _useState8[0],
    setJsonInput = _useState8[1];
  var _useState9 = useState(''),
    _useState0 = _slicedToArray(_useState9, 2),
    searchTerm = _useState0[0],
    setSearchTerm = _useState0[1];
  var _useState1 = useState(null),
    _useState10 = _slicedToArray(_useState1, 2),
    editingId = _useState10[0],
    setEditingId = _useState10[1];
  var _useState11 = useState({}),
    _useState12 = _slicedToArray(_useState11, 2),
    editForm = _useState12[0],
    setEditForm = _useState12[1];
  var _useState13 = useState(''),
    _useState14 = _slicedToArray(_useState13, 2),
    selectedEpiDelete = _useState14[0],
    setSelectedEpiDelete = _useState14[1];
  var epigrafes = Array.from(new Set(questions.map(function (q) {
    return q.epigrafe;
  }))).sort(function (a, b) {
    return a - b;
  });
  var handleFileUpload = function handleFileUpload(e) {
    var _e$target$files;
    var file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];
    if (!file) return;
    var reader = new FileReader();
    reader.onload = function (ev) {
      try {
        var _ev$target;
        var data = JSON.parse((_ev$target = ev.target) === null || _ev$target === void 0 ? void 0 : _ev$target.result);
        onImport(data, false);
        alert('Importado correctamente');
      } catch (err) {
        alert('JSON inválido');
      }
    };
    reader.readAsText(file);
  };
  var handleJsonPaste = function handleJsonPaste() {
    try {
      var data = JSON.parse(jsonInput);
      onImport(data, false);
      setJsonInput('');
      alert('Importado correctamente');
    } catch (err) {
      alert('JSON inválido');
    }
  };
  var handleHtmlBackup = function handleHtmlBackup() {
    var html = document.documentElement.outerHTML;
    var questionsJson = JSON.stringify(questions, null, 2);
    // Reemplazamos la const INITIAL_QUESTIONS con el estado actual
    var regex = /const INITIAL_QUESTIONS = \[[\s\S]*?\];/;
    if (!regex.test(html)) {
      alert("No se pudo generar el backup: No se encontró la estructura de datos original.");
      return;
    }
    var newHtml = html.replace(regex, "const INITIAL_QUESTIONS = ".concat(questionsJson, ";"));
    var blob = new Blob([newHtml], {
      type: 'text/html'
    });
    var url = URL.createObjectURL(blob);
    var a = document.createElement('a');
    a.href = url;
    a.download = "LMA_Prep_Backup_".concat(new Date().toISOString().slice(0, 10), ".html");
    a.click();
  };
  var startEdit = function startEdit(q) {
    setEditingId(q.id);
    setEditForm(_objectSpread({}, q));
  };
  var saveEdit = function saveEdit() {
    if (editingId && editForm) {
      onUpdateQuestion(editingId, editForm);
      setEditingId(null);
    }
  };
  var filteredQuestions = questions.filter(function (q) {
    return q.question.toLowerCase().includes(searchTerm.toLowerCase()) || q.epigrafe.toString().includes(searchTerm);
  });
  return /*#__PURE__*/React.createElement("div", {
    className: "space-y-6 animate-fade-in"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex justify-between items-center mb-4"
  }, /*#__PURE__*/React.createElement("h2", {
    className: "text-2xl font-bold text-slate-800"
  }, "Administraci\xF3n"), /*#__PURE__*/React.createElement("button", {
    onClick: onBack,
    className: "text-sm text-slate-500 hover:text-slate-800"
  }, "\u2190 Volver")), /*#__PURE__*/React.createElement("div", {
    className: "bg-white p-4 rounded-xl shadow-sm border border-slate-200 grid grid-cols-1 md:grid-cols-2 gap-4"
  }, /*#__PURE__*/React.createElement("div", {
    className: "space-y-2"
  }, /*#__PURE__*/React.createElement("h3", {
    className: "font-semibold text-slate-700"
  }, "Importar/Exportar"), /*#__PURE__*/React.createElement("div", {
    className: "flex flex-wrap gap-2"
  }, /*#__PURE__*/React.createElement("label", {
    className: "bg-blue-50 text-blue-600 px-3 py-1 rounded text-sm cursor-pointer hover:bg-blue-100"
  }, "Subir JSON", /*#__PURE__*/React.createElement("input", {
    type: "file",
    className: "hidden",
    accept: ".json",
    onChange: handleFileUpload
  })), /*#__PURE__*/React.createElement("button", {
    onClick: onExport,
    className: "bg-slate-100 text-slate-600 px-3 py-1 rounded text-sm hover:bg-slate-200"
  }, "Exportar JSON"), /*#__PURE__*/React.createElement("button", {
    onClick: handleHtmlBackup,
    className: "bg-purple-100 text-purple-700 px-3 py-1 rounded text-sm hover:bg-purple-200 border border-purple-200"
  }, "\uD83D\uDCBE Backup App + Datos")), /*#__PURE__*/React.createElement("textarea", {
    className: "w-full text-xs border p-2 rounded mt-2",
    rows: 2,
    placeholder: "Pegar JSON aqu\xED...",
    value: jsonInput,
    onChange: function onChange(e) {
      return setJsonInput(e.target.value);
    }
  }), /*#__PURE__*/React.createElement("button", {
    onClick: handleJsonPaste,
    disabled: !jsonInput,
    className: "bg-blue-600 text-white hover:bg-blue-700 text-xs py-1 px-2 w-full rounded"
  }, "Importar Texto")), /*#__PURE__*/React.createElement("div", {
    className: "space-y-2"
  }, /*#__PURE__*/React.createElement("h3", {
    className: "font-semibold text-red-700"
  }, "Zona de Peligro"), /*#__PURE__*/React.createElement("div", {
    className: "flex gap-2 items-center"
  }, /*#__PURE__*/React.createElement("select", {
    className: "border p-2 rounded text-sm w-full",
    value: selectedEpiDelete,
    onChange: function onChange(e) {
      return setSelectedEpiDelete(e.target.value);
    }
  }, /*#__PURE__*/React.createElement("option", {
    value: ""
  }, "Seleccionar Ep\xEDgrafe..."), epigrafes.map(function (e) {
    return /*#__PURE__*/React.createElement("option", {
      key: e,
      value: e
    }, e);
  })), /*#__PURE__*/React.createElement("button", {
    onClick: function onClick() {
      if (window.confirm("\xBFBorrar todo el ep\xEDgrafe ".concat(selectedEpiDelete, "?"))) onDeleteEpigrafe(Number(selectedEpiDelete));
    },
    disabled: !selectedEpiDelete,
    className: "bg-red-100 text-red-700 px-3 py-2 rounded hover:bg-red-200 disabled:opacity-50 text-sm whitespace-nowrap"
  }, "Borrar Epi")), /*#__PURE__*/React.createElement("button", {
    onClick: function onClick() {
      if (window.confirm("¿Borrar TODAS las preguntas?")) onDeleteAll();
    },
    className: "w-full bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700 text-sm"
  }, "Borrar Banco Completo"))), /*#__PURE__*/React.createElement("div", {
    className: "space-y-2"
  }, /*#__PURE__*/React.createElement("input", {
    type: "text",
    placeholder: "Buscar pregunta...",
    className: "w-full border p-2 rounded-lg",
    value: searchTerm,
    onChange: function onChange(e) {
      return setSearchTerm(e.target.value);
    }
  }), /*#__PURE__*/React.createElement("div", {
    className: "max-h-[600px] overflow-y-auto space-y-2 pr-1"
  }, filteredQuestions.slice(0, 50).map(function (q) {
    var _editForm$options;
    return /*#__PURE__*/React.createElement("div", {
      key: q.id,
      className: "bg-white p-3 rounded-lg border shadow-sm hover:shadow-md transition-shadow"
    }, editingId === q.id ? /*#__PURE__*/React.createElement("div", {
      className: "space-y-2"
    }, /*#__PURE__*/React.createElement("div", {
      className: "flex gap-2"
    }, /*#__PURE__*/React.createElement("input", {
      type: "number",
      value: editForm.epigrafe,
      onChange: function onChange(e) {
        return setEditForm(_objectSpread(_objectSpread({}, editForm), {}, {
          epigrafe: Number(e.target.value)
        }));
      },
      className: "border p-1 rounded w-20 text-sm",
      placeholder: "Epi"
    }), /*#__PURE__*/React.createElement("input", {
      type: "number",
      value: editForm.answer,
      onChange: function onChange(e) {
        return setEditForm(_objectSpread(_objectSpread({}, editForm), {}, {
          answer: Number(e.target.value)
        }));
      },
      className: "border p-1 rounded w-20 text-sm",
      placeholder: "Correcta (idx)"
    })), /*#__PURE__*/React.createElement("input", {
      className: "border p-1 rounded w-full font-semibold text-sm",
      value: editForm.question,
      onChange: function onChange(e) {
        return setEditForm(_objectSpread(_objectSpread({}, editForm), {}, {
          question: e.target.value
        }));
      }
    }), /*#__PURE__*/React.createElement("textarea", {
      className: "border p-1 rounded w-full text-sm",
      value: (_editForm$options = editForm.options) === null || _editForm$options === void 0 ? void 0 : _editForm$options.join('|'),
      onChange: function onChange(e) {
        return setEditForm(_objectSpread(_objectSpread({}, editForm), {}, {
          options: e.target.value.split('|')
        }));
      },
      placeholder: "Opciones separadas por |"
    }), /*#__PURE__*/React.createElement("div", {
      className: "flex gap-2 justify-end"
    }, /*#__PURE__*/React.createElement("button", {
      onClick: function onClick() {
        return setEditingId(null);
      },
      className: "text-slate-500 text-sm"
    }, "Cancelar"), /*#__PURE__*/React.createElement("button", {
      onClick: saveEdit,
      className: "text-green-600 font-bold text-sm"
    }, "Guardar"))) : /*#__PURE__*/React.createElement("div", {
      className: "flex justify-between items-start gap-4"
    }, /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("span", {
      className: "text-xs font-bold text-blue-600 bg-blue-50 px-2 py-0.5 rounded"
    }, "Epi ", q.epigrafe), /*#__PURE__*/React.createElement("p", {
      className: "font-medium mt-1 text-slate-800 text-sm"
    }, q.question), /*#__PURE__*/React.createElement("p", {
      className: "text-xs text-slate-500 mt-1"
    }, q.options.length, " opciones. Resp: ", q.answer)), /*#__PURE__*/React.createElement("div", {
      className: "flex flex-col gap-1"
    }, /*#__PURE__*/React.createElement("button", {
      onClick: function onClick() {
        return startEdit(q);
      },
      className: "text-xs bg-amber-100 text-amber-800 px-2 py-1 rounded"
    }, "Editar"), /*#__PURE__*/React.createElement("button", {
      onClick: function onClick() {
        if (window.confirm('¿Eliminar?')) onDeleteQuestion(q.id);
      },
      className: "text-xs bg-red-100 text-red-800 px-2 py-1 rounded"
    }, "Borrar"))));
  }), filteredQuestions.length === 0 && /*#__PURE__*/React.createElement("p", {
    className: "text-center text-slate-400"
  }, "No hay preguntas"))));
};

// --- COMPONENT: QuizScreen ---
var QuizScreen = function QuizScreen(_ref2) {
  var questions = _ref2.questions,
    mode = _ref2.mode,
    reps = _ref2.reps,
    onComplete = _ref2.onComplete,
    onExit = _ref2.onExit;
  var _useState15 = useState(0),
    _useState16 = _slicedToArray(_useState15, 2),
    currentIndex = _useState16[0],
    setCurrentIndex = _useState16[1];
  var _useState17 = useState(null),
    _useState18 = _slicedToArray(_useState17, 2),
    selectedOption = _useState18[0],
    setSelectedOption = _useState18[1];
  var _useState19 = useState(new Array(questions.length).fill(null)),
    _useState20 = _slicedToArray(_useState19, 2),
    answers = _useState20[0],
    setAnswers = _useState20[1];
  var _useState21 = useState(new Set()),
    _useState22 = _slicedToArray(_useState21, 2),
    doubts = _useState22[0],
    setDoubts = _useState22[1];
  var _useState23 = useState(false),
    _useState24 = _slicedToArray(_useState23, 2),
    showFeedback = _useState24[0],
    setShowFeedback = _useState24[1];
  var currentQ = questions[currentIndex];
  var progress = (currentIndex + 1) / questions.length * 100;
  var handleOptionSelect = function handleOptionSelect(index) {
    if (mode === 'review' && showFeedback) return;
    setSelectedOption(index);
    var newAnswers = _toConsumableArray(answers);
    newAnswers[currentIndex] = index;
    setAnswers(newAnswers);
    if (mode === 'review') {
      setShowFeedback(true);
    }
  };
  var handleNext = function handleNext() {
    if (currentIndex < questions.length - 1) {
      setCurrentIndex(function (prev) {
        return prev + 1;
      });
      setSelectedOption(null);
      setShowFeedback(false);
    } else {
      finishQuiz();
    }
  };
  var finishQuiz = function finishQuiz() {
    var results = questions.map(function (q, i) {
      return {
        question: q,
        answer: answers[i] !== null ? answers[i] : -1,
        correct: answers[i] === q.answer,
        doubt: doubts.has(i)
      };
    });
    onComplete(results);
  };
  var toggleDoubt = function toggleDoubt() {
    var newDoubts = new Set(doubts);
    if (newDoubts.has(currentIndex)) newDoubts["delete"](currentIndex);else newDoubts.add(currentIndex);
    setDoubts(newDoubts);
  };
  var searchGoogle = function searchGoogle() {
    var query = encodeURIComponent(currentQ.question);
    window.open("https://www.google.com/search?q=".concat(query), '_blank');
  };
  var getOptionClass = function getOptionClass(idx) {
    var base = "p-4 border-2 rounded-xl cursor-pointer transition-all duration-200 flex items-center justify-between group ";
    if (mode === 'review' && showFeedback) {
      if (idx === currentQ.answer) return base + "bg-green-100 border-green-500 text-green-800 font-medium";
      if (idx === selectedOption) return base + "bg-red-100 border-red-500 text-red-800";
      return base + "border-slate-200 opacity-50 cursor-not-allowed";
    }
    if (selectedOption === idx) return base + "bg-blue-50 border-blue-500 ring-1 ring-blue-500 shadow-md";
    return base + "bg-white border-slate-200 hover:border-blue-300 hover:bg-slate-50";
  };
  return /*#__PURE__*/React.createElement("div", {
    className: "max-w-3xl mx-auto"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex justify-between items-center mb-6"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-4"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onExit,
    className: "text-slate-400 hover:text-slate-600"
  }, "\u2715"), /*#__PURE__*/React.createElement("span", {
    className: "font-mono text-slate-500 text-sm"
  }, currentIndex + 1, " / ", questions.length)), /*#__PURE__*/React.createElement("label", {
    className: "flex items-center gap-2 cursor-pointer select-none"
  }, /*#__PURE__*/React.createElement("input", {
    type: "checkbox",
    checked: doubts.has(currentIndex),
    onChange: toggleDoubt,
    className: "w-4 h-4 text-amber-500 rounded focus:ring-amber-500"
  }), /*#__PURE__*/React.createElement("span", {
    className: "text-sm font-medium ".concat(doubts.has(currentIndex) ? 'text-amber-600' : 'text-slate-400')
  }, "Marcar Duda"))), /*#__PURE__*/React.createElement("div", {
    className: "h-2 bg-slate-200 rounded-full mb-8 overflow-hidden"
  }, /*#__PURE__*/React.createElement("div", {
    className: "h-full bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-500 ease-out",
    style: {
      width: "".concat(progress, "%")
    }
  })), /*#__PURE__*/React.createElement("div", {
    className: "bg-white rounded-2xl shadow-xl border border-slate-100 p-6 md:p-10 mb-6 relative overflow-hidden"
  }, /*#__PURE__*/React.createElement("div", {
    className: "absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-400 to-indigo-400"
  }), /*#__PURE__*/React.createElement("span", {
    className: "inline-block bg-slate-100 text-slate-600 text-xs font-bold px-2 py-1 rounded mb-4 uppercase tracking-wider"
  }, "Ep\xEDgrafe ", currentQ.epigrafe), /*#__PURE__*/React.createElement("h2", {
    className: "text-xl md:text-2xl font-semibold text-slate-800 mb-8 leading-relaxed"
  }, currentQ.question), /*#__PURE__*/React.createElement("div", {
    className: "space-y-3"
  }, currentQ.options.map(function (opt, idx) {
    return /*#__PURE__*/React.createElement("div", {
      key: idx,
      onClick: function onClick() {
        return handleOptionSelect(idx);
      },
      className: getOptionClass(idx)
    }, /*#__PURE__*/React.createElement("div", {
      className: "flex items-center gap-4"
    }, /*#__PURE__*/React.createElement("div", {
      className: "w-8 h-8 rounded-full flex items-center justify-center border-2 text-sm font-bold\n                                            ".concat(mode === 'review' && showFeedback && idx === currentQ.answer ? 'border-green-600 bg-green-600 text-white' : selectedOption === idx ? 'border-blue-500 bg-blue-500 text-white' : 'border-slate-300 text-slate-400 group-hover:border-blue-300', "\n                                        ")
    }, String.fromCharCode(65 + idx)), /*#__PURE__*/React.createElement("span", null, opt)), mode === 'review' && showFeedback && idx === currentQ.answer && /*#__PURE__*/React.createElement("span", {
      className: "text-green-600"
    }, "\u2714"), mode === 'review' && showFeedback && idx === selectedOption && idx !== currentQ.answer && /*#__PURE__*/React.createElement("span", {
      className: "text-red-500"
    }, "\u2716"));
  })), mode === 'review' && showFeedback && /*#__PURE__*/React.createElement("div", {
    className: "mt-8 pt-6 border-t border-slate-100 animate-fade-in"
  }, /*#__PURE__*/React.createElement("h3", {
    className: "text-sm font-bold text-slate-500 uppercase tracking-wide mb-2"
  }, "Explicaci\xF3n"), /*#__PURE__*/React.createElement("p", {
    className: "text-slate-700 bg-slate-50 p-4 rounded-lg border-l-4 border-slate-400"
  }, currentQ.explanation || "Sin explicación predefinida."), /*#__PURE__*/React.createElement("div", {
    className: "mt-4"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: searchGoogle,
    className: "flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-slate-800 bg-white border border-slate-200 hover:bg-slate-50 px-3 py-2 rounded-lg transition-colors"
  }, "Buscar en Google")))), /*#__PURE__*/React.createElement("div", {
    className: "flex justify-end"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: handleNext,
    disabled: selectedOption === null,
    className: "\n                                px-8 py-3 rounded-xl font-bold shadow-lg transition-all transform\n                                ".concat(selectedOption === null ? 'bg-slate-200 text-slate-400 cursor-not-allowed' : 'bg-blue-600 text-white hover:bg-blue-700 hover:-translate-y-1 hover:shadow-blue-200/50', "\n                            ")
  }, currentIndex === questions.length - 1 ? 'Finalizar Examen' : 'Siguiente')));
};

// --- COMPONENT: App ---
var App = function App() {
  var _useQuestionBank = useQuestionBank(),
    questions = _useQuestionBank.questions,
    reps = _useQuestionBank.reps,
    loading = _useQuestionBank.loading,
    addQuestion = _useQuestionBank.addQuestion,
    updateQuestion = _useQuestionBank.updateQuestion,
    deleteQuestion = _useQuestionBank.deleteQuestion,
    updateRep = _useQuestionBank.updateRep,
    importQuestions = _useQuestionBank.importQuestions,
    resetProgress = _useQuestionBank.resetProgress,
    setQuestions = _useQuestionBank.setQuestions;
  var _useState25 = useState('start'),
    _useState26 = _slicedToArray(_useState25, 2),
    mode = _useState26[0],
    setMode = _useState26[1];
  var _useState27 = useState('review'),
    _useState28 = _slicedToArray(_useState27, 2),
    quizMode = _useState28[0],
    setQuizMode = _useState28[1];
  var _useState29 = useState([]),
    _useState30 = _slicedToArray(_useState29, 2),
    activeQuestions = _useState30[0],
    setActiveQuestions = _useState30[1];
  var _useState31 = useState([]),
    _useState32 = _slicedToArray(_useState31, 2),
    quizResults = _useState32[0],
    setQuizResults = _useState32[1];
  var _useState33 = useState('all'),
    _useState34 = _slicedToArray(_useState33, 2),
    selectedEpi = _useState34[0],
    setSelectedEpi = _useState34[1];
  var _useState35 = useState(24),
    _useState36 = _slicedToArray(_useState35, 2),
    numQuestions = _useState36[0],
    setNumQuestions = _useState36[1];
  var epigrafes = useMemo(function () {
    return Array.from(new Set(questions.map(function (q) {
      return q.epigrafe;
    }))).sort(function (a, b) {
      return a - b;
    });
  }, [questions]);
  var stats = useMemo(function () {
    var total = questions.length;
    var studied = Object.keys(reps).length;
    var mastered = Object.values(reps).filter(function (r) {
      return r.ef > 2.5;
    }).length;
    return {
      total: total,
      studied: studied,
      mastered: mastered
    };
  }, [questions, reps]);
  var startQuiz = function startQuiz() {
    var now = Date.now();
    var pool = questions.filter(function (q) {
      if (selectedEpi !== 'all' && q.epigrafe !== Number(selectedEpi)) return false;
      var r = reps[q.id];
      if (!r) return true;
      return r.next <= now;
    });
    if (pool.length === 0) {
      alert("No hay preguntas pendientes para repasar en este criterio.");
      return;
    }

    // Shuffle
    pool = pool.sort(function () {
      return Math.random() - 0.5;
    }).slice(0, numQuestions);
    setActiveQuestions(pool);
    setMode('quiz');
  };
  var handleQuizComplete = function handleQuizComplete(results) {
    results.forEach(function (r) {
      var newRep = calculateSM2(r.question, r.correct, reps);
      if (r.doubt) newRep.duda = true;
      updateRep(r.question.id, newRep);
    });
    setQuizResults(results);
    setMode('results');
  };
  var downloadBackup = function downloadBackup() {
    var dataStr = JSON.stringify(questions, null, 2);
    var dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);
    var exportFileDefaultName = 'questions_backup.json';
    var linkElement = document.createElement('a');
    linkElement.setAttribute('href', dataUri);
    linkElement.setAttribute('download', exportFileDefaultName);
    linkElement.click();
  };
  if (loading) return /*#__PURE__*/React.createElement("div", {
    className: "flex h-screen items-center justify-center text-slate-500"
  }, "Cargando...");
  return /*#__PURE__*/React.createElement("div", {
    className: "min-h-screen p-4 md:p-8 bg-slate-100 font-sans"
  }, /*#__PURE__*/React.createElement("div", {
    className: "max-w-4xl mx-auto"
  }, mode === 'start' && /*#__PURE__*/React.createElement("div", {
    className: "bg-white rounded-2xl shadow-xl border border-slate-200 p-8 md:p-12 animate-fade-in"
  }, /*#__PURE__*/React.createElement("header", {
    className: "text-center mb-10"
  }, /*#__PURE__*/React.createElement("h1", {
    className: "text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-3"
  }, "Examen TMA Parte 66"), /*#__PURE__*/React.createElement("p", {
    className: "text-slate-500 text-lg"
  }, "Versi\xF3n Local - Sin Conexi\xF3n")), /*#__PURE__*/React.createElement("div", {
    className: "grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-slate-50 p-4 rounded-xl text-center border border-slate-100"
  }, /*#__PURE__*/React.createElement("span", {
    className: "block text-3xl font-bold text-slate-700"
  }, stats.total), /*#__PURE__*/React.createElement("span", {
    className: "text-xs text-slate-400 uppercase font-semibold"
  }, "Preguntas")), /*#__PURE__*/React.createElement("div", {
    className: "bg-blue-50 p-4 rounded-xl text-center border border-blue-100"
  }, /*#__PURE__*/React.createElement("span", {
    className: "block text-3xl font-bold text-blue-600"
  }, stats.studied), /*#__PURE__*/React.createElement("span", {
    className: "text-xs text-blue-400 uppercase font-semibold"
  }, "Estudiadas")), /*#__PURE__*/React.createElement("div", {
    className: "bg-green-50 p-4 rounded-xl text-center border border-green-100"
  }, /*#__PURE__*/React.createElement("span", {
    className: "block text-3xl font-bold text-green-600"
  }, stats.mastered), /*#__PURE__*/React.createElement("span", {
    className: "text-xs text-green-400 uppercase font-semibold"
  }, "Dominadas"))), /*#__PURE__*/React.createElement("div", {
    className: "space-y-6 max-w-md mx-auto"
  }, /*#__PURE__*/React.createElement("div", {
    className: "space-y-2"
  }, /*#__PURE__*/React.createElement("label", {
    className: "text-sm font-bold text-slate-700"
  }, "Modo"), /*#__PURE__*/React.createElement("div", {
    className: "flex bg-slate-100 p-1 rounded-lg"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: function onClick() {
      return setQuizMode('review');
    },
    className: "flex-1 py-2 rounded-md text-sm font-medium transition-all ".concat(quizMode === 'review' ? 'bg-white shadow text-blue-600' : 'text-slate-500')
  }, "Repaso"), /*#__PURE__*/React.createElement("button", {
    onClick: function onClick() {
      return setQuizMode('exam');
    },
    className: "flex-1 py-2 rounded-md text-sm font-medium transition-all ".concat(quizMode === 'exam' ? 'bg-white shadow text-blue-600' : 'text-slate-500')
  }, "Examen"))), /*#__PURE__*/React.createElement("div", {
    className: "space-y-2"
  }, /*#__PURE__*/React.createElement("label", {
    className: "text-sm font-bold text-slate-700"
  }, "Ep\xEDgrafe"), /*#__PURE__*/React.createElement("select", {
    value: selectedEpi,
    onChange: function onChange(e) {
      return setSelectedEpi(e.target.value);
    },
    className: "w-full p-3 bg-white border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none"
  }, /*#__PURE__*/React.createElement("option", {
    value: "all"
  }, "Todos"), epigrafes.map(function (e) {
    return /*#__PURE__*/React.createElement("option", {
      key: e,
      value: e
    }, "Ep\xEDgrafe ", e);
  }))), /*#__PURE__*/React.createElement("div", {
    className: "space-y-2"
  }, /*#__PURE__*/React.createElement("label", {
    className: "text-sm font-bold text-slate-700"
  }, "Cantidad"), /*#__PURE__*/React.createElement("input", {
    type: "number",
    min: "5",
    max: "100",
    value: numQuestions,
    onChange: function onChange(e) {
      return setNumQuestions(Number(e.target.value));
    },
    className: "w-full p-3 bg-white border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none"
  })), /*#__PURE__*/React.createElement("button", {
    onClick: startQuiz,
    className: "w-full py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all"
  }, "Comenzar Pr\xE1ctica"), /*#__PURE__*/React.createElement("div", {
    className: "grid grid-cols-2 gap-4 mt-4"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: function onClick() {
      return setMode('admin');
    },
    className: "text-slate-500 text-sm hover:text-slate-800"
  }, "\u2699\uFE0F Admin"), /*#__PURE__*/React.createElement("button", {
    onClick: function onClick() {
      if (window.confirm("¿Resetear todo?")) resetProgress();
    },
    className: "text-red-400 text-sm hover:text-red-600"
  }, "\u21BA Reset")))), mode === 'quiz' && /*#__PURE__*/React.createElement(QuizScreen, {
    questions: activeQuestions,
    mode: quizMode,
    reps: reps,
    onComplete: handleQuizComplete,
    onExit: function onExit() {
      return setMode('start');
    }
  }), mode === 'results' && /*#__PURE__*/React.createElement("div", {
    className: "bg-white rounded-2xl shadow-xl border border-slate-200 p-8 animate-fade-in"
  }, /*#__PURE__*/React.createElement("div", {
    className: "text-center mb-8"
  }, /*#__PURE__*/React.createElement("h2", {
    className: "text-3xl font-bold text-slate-800 mb-2"
  }, "Resultados"), /*#__PURE__*/React.createElement("div", {
    className: "text-6xl font-black text-blue-600 mb-4"
  }, Math.round(quizResults.filter(function (r) {
    return r.correct;
  }).length / quizResults.length * 100), "%"), /*#__PURE__*/React.createElement("p", {
    className: "text-slate-500"
  }, quizResults.filter(function (r) {
    return r.correct;
  }).length, " correctas de ", quizResults.length)), /*#__PURE__*/React.createElement("div", {
    className: "flex justify-center gap-4"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: function onClick() {
      return setMode('start');
    },
    className: "px-6 py-3 bg-slate-200 text-slate-700 font-bold rounded-xl hover:bg-slate-300"
  }, "Volver"))), mode === 'admin' && /*#__PURE__*/React.createElement(AdminPanel, {
    questions: questions,
    onImport: importQuestions,
    onDeleteAll: function onDeleteAll() {
      return setQuestions([]);
    },
    onDeleteEpigrafe: function onDeleteEpigrafe(epi) {
      return setQuestions(questions.filter(function (q) {
        return q.epigrafe !== epi;
      }));
    },
    onDeleteQuestion: deleteQuestion,
    onUpdateQuestion: updateQuestion,
    onExport: downloadBackup,
    onBack: function onBack() {
      return setMode('start');
    }
  })));
};
var root = ReactDOM.createRoot(document.getElementById('root'));
root.render(/*#__PURE__*/React.createElement(App, null));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfUmVhY3QiLCJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlTWVtbyIsInVzZUNhbGxiYWNrIiwiY2FsY3VsYXRlU00yIiwicXVlc3Rpb24iLCJpc0NvcnJlY3QiLCJjdXJyZW50UmVwcyIsIm5vdyIsIkRhdGUiLCJERUZBVUxUX0VGIiwicHJldiIsImlkIiwiZWYiLCJyZXAiLCJpbnRlcnZhbCIsImVwaWdyYWZlIiwibmV4dCIsIm5ld1JlcCIsIl9vYmplY3RTcHJlYWQiLCJsYXN0UmVzdWx0IiwiTWF0aCIsInJvdW5kIiwibWF4IiwiZ2VuZXJhdGVVSUQiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsIklOSVRJQUxfUVVFU1RJT05TIiwib3B0aW9ucyIsImFuc3dlciIsImV4cGxhbmF0aW9uIiwidXNlUXVlc3Rpb25CYW5rIiwiX3VzZVN0YXRlIiwiX3VzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5IiwicXVlc3Rpb25zIiwic2V0UXVlc3Rpb25zIiwiX3VzZVN0YXRlMyIsIl91c2VTdGF0ZTQiLCJyZXBzIiwic2V0UmVwcyIsIl91c2VTdGF0ZTUiLCJfdXNlU3RhdGU2IiwibG9hZGluZyIsInNldExvYWRpbmciLCJzdG9yZWRRIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInN0b3JlZFIiLCJKU09OIiwicGFyc2UiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiYWRkUXVlc3Rpb24iLCJxIiwibmV3USIsImNvbmNhdCIsIl90b0NvbnN1bWFibGVBcnJheSIsInVwZGF0ZVF1ZXN0aW9uIiwidXBkYXRlZCIsIm1hcCIsImRlbGV0ZVF1ZXN0aW9uIiwiZmlsdGVyIiwibmV3UmVwcyIsInVwZGF0ZVJlcCIsImRhdGEiLCJfZGVmaW5lUHJvcGVydHkiLCJyZXNldFByb2dyZXNzIiwiaW1wb3J0UXVlc3Rpb25zIiwiaW1wb3J0ZWQiLCJyZXBsYWNlIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwidmFsaWQiLCJwcmVwYXJlZCIsIkFkbWluUGFuZWwiLCJfcmVmIiwib25JbXBvcnQiLCJvbkRlbGV0ZUFsbCIsIm9uRGVsZXRlRXBpZ3JhZmUiLCJvbkRlbGV0ZVF1ZXN0aW9uIiwib25VcGRhdGVRdWVzdGlvbiIsIm9uRXhwb3J0Iiwib25CYWNrIiwiX3VzZVN0YXRlNyIsIl91c2VTdGF0ZTgiLCJqc29uSW5wdXQiLCJzZXRKc29uSW5wdXQiLCJfdXNlU3RhdGU5IiwiX3VzZVN0YXRlMCIsInNlYXJjaFRlcm0iLCJzZXRTZWFyY2hUZXJtIiwiX3VzZVN0YXRlMSIsIl91c2VTdGF0ZTEwIiwiZWRpdGluZ0lkIiwic2V0RWRpdGluZ0lkIiwiX3VzZVN0YXRlMTEiLCJfdXNlU3RhdGUxMiIsImVkaXRGb3JtIiwic2V0RWRpdEZvcm0iLCJfdXNlU3RhdGUxMyIsIl91c2VTdGF0ZTE0Iiwic2VsZWN0ZWRFcGlEZWxldGUiLCJzZXRTZWxlY3RlZEVwaURlbGV0ZSIsImVwaWdyYWZlcyIsIkFycmF5IiwiZnJvbSIsIlNldCIsInNvcnQiLCJhIiwiYiIsImhhbmRsZUZpbGVVcGxvYWQiLCJlIiwiX2UkdGFyZ2V0JGZpbGVzIiwiZmlsZSIsInRhcmdldCIsImZpbGVzIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZCIsImV2IiwiX2V2JHRhcmdldCIsInJlc3VsdCIsImFsZXJ0IiwiZXJyIiwicmVhZEFzVGV4dCIsImhhbmRsZUpzb25QYXN0ZSIsImhhbmRsZUh0bWxCYWNrdXAiLCJodG1sIiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJvdXRlckhUTUwiLCJxdWVzdGlvbnNKc29uIiwicmVnZXgiLCJ0ZXN0IiwibmV3SHRtbCIsImJsb2IiLCJCbG9iIiwidHlwZSIsInVybCIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwiZG93bmxvYWQiLCJ0b0lTT1N0cmluZyIsInNsaWNlIiwiY2xpY2siLCJzdGFydEVkaXQiLCJzYXZlRWRpdCIsImZpbHRlcmVkUXVlc3Rpb25zIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImNsYXNzTmFtZSIsIm9uQ2xpY2siLCJhY2NlcHQiLCJvbkNoYW5nZSIsInJvd3MiLCJwbGFjZWhvbGRlciIsInZhbHVlIiwiZGlzYWJsZWQiLCJrZXkiLCJ3aW5kb3ciLCJjb25maXJtIiwiTnVtYmVyIiwiX2VkaXRGb3JtJG9wdGlvbnMiLCJqb2luIiwic3BsaXQiLCJRdWl6U2NyZWVuIiwiX3JlZjIiLCJtb2RlIiwib25Db21wbGV0ZSIsIm9uRXhpdCIsIl91c2VTdGF0ZTE1IiwiX3VzZVN0YXRlMTYiLCJjdXJyZW50SW5kZXgiLCJzZXRDdXJyZW50SW5kZXgiLCJfdXNlU3RhdGUxNyIsIl91c2VTdGF0ZTE4Iiwic2VsZWN0ZWRPcHRpb24iLCJzZXRTZWxlY3RlZE9wdGlvbiIsIl91c2VTdGF0ZTE5IiwiZmlsbCIsIl91c2VTdGF0ZTIwIiwiYW5zd2VycyIsInNldEFuc3dlcnMiLCJfdXNlU3RhdGUyMSIsIl91c2VTdGF0ZTIyIiwiZG91YnRzIiwic2V0RG91YnRzIiwiX3VzZVN0YXRlMjMiLCJfdXNlU3RhdGUyNCIsInNob3dGZWVkYmFjayIsInNldFNob3dGZWVkYmFjayIsImN1cnJlbnRRIiwicHJvZ3Jlc3MiLCJoYW5kbGVPcHRpb25TZWxlY3QiLCJpbmRleCIsIm5ld0Fuc3dlcnMiLCJoYW5kbGVOZXh0IiwiZmluaXNoUXVpeiIsInJlc3VsdHMiLCJpIiwiY29ycmVjdCIsImRvdWJ0IiwiaGFzIiwidG9nZ2xlRG91YnQiLCJuZXdEb3VidHMiLCJhZGQiLCJzZWFyY2hHb29nbGUiLCJxdWVyeSIsImVuY29kZVVSSUNvbXBvbmVudCIsIm9wZW4iLCJnZXRPcHRpb25DbGFzcyIsImlkeCIsImJhc2UiLCJjaGVja2VkIiwic3R5bGUiLCJ3aWR0aCIsIm9wdCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsIkFwcCIsIl91c2VRdWVzdGlvbkJhbmsiLCJfdXNlU3RhdGUyNSIsIl91c2VTdGF0ZTI2Iiwic2V0TW9kZSIsIl91c2VTdGF0ZTI3IiwiX3VzZVN0YXRlMjgiLCJxdWl6TW9kZSIsInNldFF1aXpNb2RlIiwiX3VzZVN0YXRlMjkiLCJfdXNlU3RhdGUzMCIsImFjdGl2ZVF1ZXN0aW9ucyIsInNldEFjdGl2ZVF1ZXN0aW9ucyIsIl91c2VTdGF0ZTMxIiwiX3VzZVN0YXRlMzIiLCJxdWl6UmVzdWx0cyIsInNldFF1aXpSZXN1bHRzIiwiX3VzZVN0YXRlMzMiLCJfdXNlU3RhdGUzNCIsInNlbGVjdGVkRXBpIiwic2V0U2VsZWN0ZWRFcGkiLCJfdXNlU3RhdGUzNSIsIl91c2VTdGF0ZTM2IiwibnVtUXVlc3Rpb25zIiwic2V0TnVtUXVlc3Rpb25zIiwic3RhdHMiLCJ0b3RhbCIsInN0dWRpZWQiLCJPYmplY3QiLCJrZXlzIiwibWFzdGVyZWQiLCJ2YWx1ZXMiLCJyIiwic3RhcnRRdWl6IiwicG9vbCIsImhhbmRsZVF1aXpDb21wbGV0ZSIsImZvckVhY2giLCJkdWRhIiwiZG93bmxvYWRCYWNrdXAiLCJkYXRhU3RyIiwiZGF0YVVyaSIsImV4cG9ydEZpbGVEZWZhdWx0TmFtZSIsImxpbmtFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwibWluIiwiZXBpIiwicm9vdCIsIlJlYWN0RE9NIiwiY3JlYXRlUm9vdCIsImdldEVsZW1lbnRCeUlkIiwicmVuZGVyIl0sInNvdXJjZXMiOlsiSW5saW5lIEJhYmVsIHNjcmlwdCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgY29uc3QgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VDYWxsYmFjayB9ID0gUmVhY3Q7XG5cbiAgICAgICAgLy8gLS0tIFVUSUxTOiBTTTIgQWxnb3JpdGhtIC0tLVxuICAgICAgICBjb25zdCBjYWxjdWxhdGVTTTIgPSAocXVlc3Rpb24sIGlzQ29ycmVjdCwgY3VycmVudFJlcHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjb25zdCBERUZBVUxUX0VGID0gMi41O1xuICAgICAgICAgICAgY29uc3QgcHJldiA9IGN1cnJlbnRSZXBzW3F1ZXN0aW9uLmlkXSB8fCB7IFxuICAgICAgICAgICAgICAgIGVmOiBERUZBVUxUX0VGLCBcbiAgICAgICAgICAgICAgICByZXA6IDAsIFxuICAgICAgICAgICAgICAgIGludGVydmFsOiAwLCBcbiAgICAgICAgICAgICAgICBlcGlncmFmZTogcXVlc3Rpb24uZXBpZ3JhZmUsXG4gICAgICAgICAgICAgICAgbmV4dDogMCBcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGxldCBuZXdSZXAgPSB7IC4uLnByZXYsIGxhc3RSZXN1bHQ6IGlzQ29ycmVjdCB9O1xuXG4gICAgICAgICAgICBpZiAoaXNDb3JyZWN0KSB7XG4gICAgICAgICAgICAgICAgbmV3UmVwLnJlcCA9IHByZXYucmVwICsgMTtcbiAgICAgICAgICAgICAgICBpZiAobmV3UmVwLnJlcCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdSZXAuaW50ZXJ2YWwgPSAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3UmVwLnJlcCA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICBuZXdSZXAuaW50ZXJ2YWwgPSA2O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1JlcC5pbnRlcnZhbCA9IE1hdGgucm91bmQocHJldi5pbnRlcnZhbCAqIHByZXYuZWYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXdSZXAuZWYgPSBNYXRoLm1heCgxLjMsIHByZXYuZWYgKyAwLjEpO1xuICAgICAgICAgICAgICAgIG5ld1JlcC5uZXh0ID0gbm93ICsgbmV3UmVwLmludGVydmFsICogMjQgKiA2MCAqIDYwICogMTAwMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3UmVwLnJlcCA9IDA7XG4gICAgICAgICAgICAgICAgbmV3UmVwLmludGVydmFsID0gMDtcbiAgICAgICAgICAgICAgICBuZXdSZXAubmV4dCA9IG5vdztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXdSZXA7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gLS0tIEhPT0s6IFF1ZXN0aW9uIEJhbmsgLS0tXG4gICAgICAgIGNvbnN0IGdlbmVyYXRlVUlEID0gKCkgPT4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgSU5JVElBTF9RVUVTVElPTlMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6ICdpbml0XzEnLFxuICAgICAgICAgICAgICAgIGVwaWdyYWZlOiAxNSxcbiAgICAgICAgICAgICAgICBxdWVzdGlvbjogXCLCv0N1w6FsIGVzIGxhIHBhcnTDrWN1bGEgY29uIGNhcmdhIG5lZ2F0aXZhP1wiLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IFtcIlByb3TDs25cIiwgXCJFbGVjdHLDs25cIiwgXCJOZXV0csOzblwiXSxcbiAgICAgICAgICAgICAgICBhbnN3ZXI6IDEsXG4gICAgICAgICAgICAgICAgZXhwbGFuYXRpb246IFwiRWwgZWxlY3Ryw7NuIGVzIHVuYSBwYXJ0w61jdWxhIHN1YmF0w7NtaWNhIGNvbiB1bmEgY2FyZ2EgZWzDqWN0cmljYSBlbGVtZW50YWwgbmVnYXRpdmEuXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcblxuICAgICAgICBjb25zdCB1c2VRdWVzdGlvbkJhbmsgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbcXVlc3Rpb25zLCBzZXRRdWVzdGlvbnNdID0gdXNlU3RhdGUoW10pO1xuICAgICAgICAgICAgY29uc3QgW3JlcHMsIHNldFJlcHNdID0gdXNlU3RhdGUoe30pO1xuICAgICAgICAgICAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG5cbiAgICAgICAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmVkUSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdxQmFuaycpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlZFIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncmVwcycpO1xuICAgICAgICAgICAgICAgIGlmIChzdG9yZWRRKSBzZXRRdWVzdGlvbnMoSlNPTi5wYXJzZShzdG9yZWRRKSk7XG4gICAgICAgICAgICAgICAgZWxzZSBzZXRRdWVzdGlvbnMoSU5JVElBTF9RVUVTVElPTlMpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChzdG9yZWRSKSBzZXRSZXBzKEpTT04ucGFyc2Uoc3RvcmVkUikpO1xuICAgICAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgfSwgW10pO1xuXG4gICAgICAgICAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghbG9hZGluZykgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3FCYW5rJywgSlNPTi5zdHJpbmdpZnkocXVlc3Rpb25zKSk7XG4gICAgICAgICAgICB9LCBbcXVlc3Rpb25zLCBsb2FkaW5nXSk7XG5cbiAgICAgICAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFsb2FkaW5nKSBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncmVwcycsIEpTT04uc3RyaW5naWZ5KHJlcHMpKTtcbiAgICAgICAgICAgIH0sIFtyZXBzLCBsb2FkaW5nXSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFkZFF1ZXN0aW9uID0gKHEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdRID0geyAuLi5xLCBpZDogZ2VuZXJhdGVVSUQoKSB9O1xuICAgICAgICAgICAgICAgIHNldFF1ZXN0aW9ucyhwcmV2ID0+IFsuLi5wcmV2LCBuZXdRXSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVRdWVzdGlvbiA9IChpZCwgdXBkYXRlZCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldFF1ZXN0aW9ucyhwcmV2ID0+IHByZXYubWFwKHEgPT4gcS5pZCA9PT0gaWQgPyB7IC4uLnEsIC4uLnVwZGF0ZWQgfSA6IHEpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IGRlbGV0ZVF1ZXN0aW9uID0gKGlkKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0UXVlc3Rpb25zKHByZXYgPT4gcHJldi5maWx0ZXIocSA9PiBxLmlkICE9PSBpZCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1JlcHMgPSB7IC4uLnJlcHMgfTtcbiAgICAgICAgICAgICAgICBkZWxldGUgbmV3UmVwc1tpZF07XG4gICAgICAgICAgICAgICAgc2V0UmVwcyhuZXdSZXBzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVJlcCA9IChpZCwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldFJlcHMocHJldiA9PiAoeyAuLi5wcmV2LCBbaWRdOiBkYXRhIH0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc2V0UHJvZ3Jlc3MgPSAoKSA9PiBzZXRSZXBzKHt9KTtcblxuICAgICAgICAgICAgY29uc3QgaW1wb3J0UXVlc3Rpb25zID0gKGltcG9ydGVkLCByZXBsYWNlID0gZmFsc2UpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWxpZCA9IGltcG9ydGVkLmZpbHRlcihxID0+IHEucXVlc3Rpb24gJiYgcS5vcHRpb25zICYmIHR5cGVvZiBxLmFuc3dlciA9PT0gJ251bWJlcicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXBhcmVkID0gdmFsaWQubWFwKHEgPT4gKHsuLi5xLCBpZDogcS5pZCB8fCBnZW5lcmF0ZVVJRCgpfSkpO1xuICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFF1ZXN0aW9ucyhwcmVwYXJlZCk7XG4gICAgICAgICAgICAgICAgICAgIHNldFJlcHMoe30pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFF1ZXN0aW9ucyhwcmV2ID0+IFsuLi5wcmV2LCAuLi5wcmVwYXJlZF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiB7IHF1ZXN0aW9ucywgcmVwcywgbG9hZGluZywgYWRkUXVlc3Rpb24sIHVwZGF0ZVF1ZXN0aW9uLCBkZWxldGVRdWVzdGlvbiwgdXBkYXRlUmVwLCByZXNldFByb2dyZXNzLCBpbXBvcnRRdWVzdGlvbnMsIHNldFF1ZXN0aW9ucyB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIC0tLSBDT01QT05FTlQ6IEFkbWluUGFuZWwgLS0tXG4gICAgICAgIGNvbnN0IEFkbWluUGFuZWwgPSAoeyBxdWVzdGlvbnMsIG9uSW1wb3J0LCBvbkRlbGV0ZUFsbCwgb25EZWxldGVFcGlncmFmZSwgb25EZWxldGVRdWVzdGlvbiwgb25VcGRhdGVRdWVzdGlvbiwgb25FeHBvcnQsIG9uQmFjayB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbanNvbklucHV0LCBzZXRKc29uSW5wdXRdID0gdXNlU3RhdGUoJycpO1xuICAgICAgICAgICAgY29uc3QgW3NlYXJjaFRlcm0sIHNldFNlYXJjaFRlcm1dID0gdXNlU3RhdGUoJycpO1xuICAgICAgICAgICAgY29uc3QgW2VkaXRpbmdJZCwgc2V0RWRpdGluZ0lkXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgICAgICAgICAgY29uc3QgW2VkaXRGb3JtLCBzZXRFZGl0Rm9ybV0gPSB1c2VTdGF0ZSh7fSk7XG4gICAgICAgICAgICBjb25zdCBbc2VsZWN0ZWRFcGlEZWxldGUsIHNldFNlbGVjdGVkRXBpRGVsZXRlXSA9IHVzZVN0YXRlKCcnKTtcblxuICAgICAgICAgICAgY29uc3QgZXBpZ3JhZmVzID0gQXJyYXkuZnJvbShuZXcgU2V0KHF1ZXN0aW9ucy5tYXAocSA9PiBxLmVwaWdyYWZlKSkpLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcblxuICAgICAgICAgICAgY29uc3QgaGFuZGxlRmlsZVVwbG9hZCA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzPy5bMF07XG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShldi50YXJnZXQ/LnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkltcG9ydChkYXRhLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgnSW1wb3J0YWRvIGNvcnJlY3RhbWVudGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7IGFsZXJ0KCdKU09OIGludsOhbGlkbycpOyB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUpzb25QYXN0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShqc29uSW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICBvbkltcG9ydChkYXRhLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHNldEpzb25JbnB1dCgnJyk7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdJbXBvcnRhZG8gY29ycmVjdGFtZW50ZScpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgeyBhbGVydCgnSlNPTiBpbnbDoWxpZG8nKTsgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgaGFuZGxlSHRtbEJhY2t1cCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBodG1sID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTDtcbiAgICAgICAgICAgICAgICBjb25zdCBxdWVzdGlvbnNKc29uID0gSlNPTi5zdHJpbmdpZnkocXVlc3Rpb25zLCBudWxsLCAyKTtcbiAgICAgICAgICAgICAgICAvLyBSZWVtcGxhemFtb3MgbGEgY29uc3QgSU5JVElBTF9RVUVTVElPTlMgY29uIGVsIGVzdGFkbyBhY3R1YWxcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IC9jb25zdCBJTklUSUFMX1FVRVNUSU9OUyA9IFxcW1tcXHNcXFNdKj9cXF07LztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaHRtbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJObyBzZSBwdWRvIGdlbmVyYXIgZWwgYmFja3VwOiBObyBzZSBlbmNvbnRyw7MgbGEgZXN0cnVjdHVyYSBkZSBkYXRvcyBvcmlnaW5hbC5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3SHRtbCA9IGh0bWwucmVwbGFjZShyZWdleCwgYGNvbnN0IElOSVRJQUxfUVVFU1RJT05TID0gJHtxdWVzdGlvbnNKc29ufTtgKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW25ld0h0bWxdLCB7dHlwZTogJ3RleHQvaHRtbCd9KTtcbiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICAgICAgYS5ocmVmID0gdXJsO1xuICAgICAgICAgICAgICAgIGEuZG93bmxvYWQgPSBgTE1BX1ByZXBfQmFja3VwXyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApfS5odG1sYDtcbiAgICAgICAgICAgICAgICBhLmNsaWNrKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBzdGFydEVkaXQgPSAocSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldEVkaXRpbmdJZChxLmlkKTtcbiAgICAgICAgICAgICAgICBzZXRFZGl0Rm9ybSh7IC4uLnEgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBzYXZlRWRpdCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZWRpdGluZ0lkICYmIGVkaXRGb3JtKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlUXVlc3Rpb24oZWRpdGluZ0lkLCBlZGl0Rm9ybSk7XG4gICAgICAgICAgICAgICAgICAgIHNldEVkaXRpbmdJZChudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFF1ZXN0aW9ucyA9IHF1ZXN0aW9ucy5maWx0ZXIocSA9PiBcbiAgICAgICAgICAgICAgICBxLnF1ZXN0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpKSB8fFxuICAgICAgICAgICAgICAgIHEuZXBpZ3JhZmUudG9TdHJpbmcoKS5pbmNsdWRlcyhzZWFyY2hUZXJtKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNiBhbmltYXRlLWZhZGUtaW5cIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTgwMFwiPkFkbWluaXN0cmFjacOzbjwvaDI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uQmFja30gY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXNsYXRlLTUwMCBob3Zlcjp0ZXh0LXNsYXRlLTgwMFwiPuKGkCBWb2x2ZXI8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBwLTQgcm91bmRlZC14bCBzaGFkb3ctc20gYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAgZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBnYXAtNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LXNsYXRlLTcwMFwiPkltcG9ydGFyL0V4cG9ydGFyPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC13cmFwIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJiZy1ibHVlLTUwIHRleHQtYmx1ZS02MDAgcHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ibHVlLTEwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3ViaXIgSlNPTlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgY2xhc3NOYW1lPVwiaGlkZGVuXCIgYWNjZXB0PVwiLmpzb25cIiBvbkNoYW5nZT17aGFuZGxlRmlsZVVwbG9hZH0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkV4cG9ydH0gY2xhc3NOYW1lPVwiYmctc2xhdGUtMTAwIHRleHQtc2xhdGUtNjAwIHB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gaG92ZXI6Ymctc2xhdGUtMjAwXCI+RXhwb3J0YXIgSlNPTjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZUh0bWxCYWNrdXB9IGNsYXNzTmFtZT1cImJnLXB1cnBsZS0xMDAgdGV4dC1wdXJwbGUtNzAwIHB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gaG92ZXI6YmctcHVycGxlLTIwMCBib3JkZXIgYm9yZGVyLXB1cnBsZS0yMDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIPCfkr4gQmFja3VwIEFwcCArIERhdG9zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQteHMgYm9yZGVyIHAtMiByb3VuZGVkIG10LTJcIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17Mn0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGVnYXIgSlNPTiBhcXXDrS4uLlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtqc29uSW5wdXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0SnNvbklucHV0KGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlSnNvblBhc3RlfSBkaXNhYmxlZD17IWpzb25JbnB1dH0gY2xhc3NOYW1lPVwiYmctYmx1ZS02MDAgdGV4dC13aGl0ZSBob3ZlcjpiZy1ibHVlLTcwMCB0ZXh0LXhzIHB5LTEgcHgtMiB3LWZ1bGwgcm91bmRlZFwiPkltcG9ydGFyIFRleHRvPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LXJlZC03MDBcIj5ab25hIGRlIFBlbGlncm88L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMiBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJvcmRlciBwLTIgcm91bmRlZCB0ZXh0LXNtIHctZnVsbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c2VsZWN0ZWRFcGlEZWxldGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFNlbGVjdGVkRXBpRGVsZXRlKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiPlNlbGVjY2lvbmFyIEVww61ncmFmZS4uLjwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2VwaWdyYWZlcy5tYXAoZSA9PiA8b3B0aW9uIGtleT17ZX0gdmFsdWU9e2V9PntlfTwvb3B0aW9uPil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHdpbmRvdy5jb25maXJtKGDCv0JvcnJhciB0b2RvIGVsIGVww61ncmFmZSAke3NlbGVjdGVkRXBpRGVsZXRlfT9gKSkgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EZWxldGVFcGlncmFmZShOdW1iZXIoc2VsZWN0ZWRFcGlEZWxldGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXNlbGVjdGVkRXBpRGVsZXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctcmVkLTEwMCB0ZXh0LXJlZC03MDAgcHgtMyBweS0yIHJvdW5kZWQgaG92ZXI6YmctcmVkLTIwMCBkaXNhYmxlZDpvcGFjaXR5LTUwIHRleHQtc20gd2hpdGVzcGFjZS1ub3dyYXBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCb3JyYXIgRXBpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHsgaWYod2luZG93LmNvbmZpcm0oXCLCv0JvcnJhciBUT0RBUyBsYXMgcHJlZ3VudGFzP1wiKSkgb25EZWxldGVBbGwoKTsgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLXJlZC02MDAgdGV4dC13aGl0ZSBweC0zIHB5LTIgcm91bmRlZCBob3ZlcjpiZy1yZWQtNzAwIHRleHQtc21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQm9ycmFyIEJhbmNvIENvbXBsZXRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQnVzY2FyIHByZWd1bnRhLi4uXCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJvcmRlciBwLTIgcm91bmRlZC1sZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3NlYXJjaFRlcm19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRTZWFyY2hUZXJtKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1heC1oLVs2MDBweF0gb3ZlcmZsb3cteS1hdXRvIHNwYWNlLXktMiBwci0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpbHRlcmVkUXVlc3Rpb25zLnNsaWNlKDAsIDUwKS5tYXAocSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtxLmlkfSBjbGFzc05hbWU9XCJiZy13aGl0ZSBwLTMgcm91bmRlZC1sZyBib3JkZXIgc2hhZG93LXNtIGhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uLXNoYWRvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2VkaXRpbmdJZCA9PT0gcS5pZCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgdmFsdWU9e2VkaXRGb3JtLmVwaWdyYWZlfSBvbkNoYW5nZT17ZSA9PiBzZXRFZGl0Rm9ybSh7Li4uZWRpdEZvcm0sIGVwaWdyYWZlOiBOdW1iZXIoZS50YXJnZXQudmFsdWUpfSl9IGNsYXNzTmFtZT1cImJvcmRlciBwLTEgcm91bmRlZCB3LTIwIHRleHQtc21cIiBwbGFjZWhvbGRlcj1cIkVwaVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIHZhbHVlPXtlZGl0Rm9ybS5hbnN3ZXJ9IG9uQ2hhbmdlPXtlID0+IHNldEVkaXRGb3JtKHsuLi5lZGl0Rm9ybSwgYW5zd2VyOiBOdW1iZXIoZS50YXJnZXQudmFsdWUpfSl9IGNsYXNzTmFtZT1cImJvcmRlciBwLTEgcm91bmRlZCB3LTIwIHRleHQtc21cIiBwbGFjZWhvbGRlcj1cIkNvcnJlY3RhIChpZHgpXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzc05hbWU9XCJib3JkZXIgcC0xIHJvdW5kZWQgdy1mdWxsIGZvbnQtc2VtaWJvbGQgdGV4dC1zbVwiIHZhbHVlPXtlZGl0Rm9ybS5xdWVzdGlvbn0gb25DaGFuZ2U9e2UgPT4gc2V0RWRpdEZvcm0oey4uLmVkaXRGb3JtLCBxdWVzdGlvbjogZS50YXJnZXQudmFsdWV9KX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGNsYXNzTmFtZT1cImJvcmRlciBwLTEgcm91bmRlZCB3LWZ1bGwgdGV4dC1zbVwiIHZhbHVlPXtlZGl0Rm9ybS5vcHRpb25zPy5qb2luKCd8Jyl9IG9uQ2hhbmdlPXtlID0+IHNldEVkaXRGb3JtKHsuLi5lZGl0Rm9ybSwgb3B0aW9uczogZS50YXJnZXQudmFsdWUuc3BsaXQoJ3wnKX0pfSBwbGFjZWhvbGRlcj1cIk9wY2lvbmVzIHNlcGFyYWRhcyBwb3IgfFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMiBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRFZGl0aW5nSWQobnVsbCl9IGNsYXNzTmFtZT1cInRleHQtc2xhdGUtNTAwIHRleHQtc21cIj5DYW5jZWxhcjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtzYXZlRWRpdH0gY2xhc3NOYW1lPVwidGV4dC1ncmVlbi02MDAgZm9udC1ib2xkIHRleHQtc21cIj5HdWFyZGFyPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLXN0YXJ0IGdhcC00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LWJsdWUtNjAwIGJnLWJsdWUtNTAgcHgtMiBweS0wLjUgcm91bmRlZFwiPkVwaSB7cS5lcGlncmFmZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmb250LW1lZGl1bSBtdC0xIHRleHQtc2xhdGUtODAwIHRleHQtc21cIj57cS5xdWVzdGlvbn08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtc2xhdGUtNTAwIG10LTFcIj57cS5vcHRpb25zLmxlbmd0aH0gb3BjaW9uZXMuIFJlc3A6IHtxLmFuc3dlcn08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZ2FwLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc3RhcnRFZGl0KHEpfSBjbGFzc05hbWU9XCJ0ZXh0LXhzIGJnLWFtYmVyLTEwMCB0ZXh0LWFtYmVyLTgwMCBweC0yIHB5LTEgcm91bmRlZFwiPkVkaXRhcjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB7aWYod2luZG93LmNvbmZpcm0oJ8K/RWxpbWluYXI/JykpIG9uRGVsZXRlUXVlc3Rpb24ocS5pZCl9fSBjbGFzc05hbWU9XCJ0ZXh0LXhzIGJnLXJlZC0xMDAgdGV4dC1yZWQtODAwIHB4LTIgcHktMSByb3VuZGVkXCI+Qm9ycmFyPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpbHRlcmVkUXVlc3Rpb25zLmxlbmd0aCA9PT0gMCAmJiA8cCBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciB0ZXh0LXNsYXRlLTQwMFwiPk5vIGhheSBwcmVndW50YXM8L3A+fVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyAtLS0gQ09NUE9ORU5UOiBRdWl6U2NyZWVuIC0tLVxuICAgICAgICBjb25zdCBRdWl6U2NyZWVuID0gKHsgcXVlc3Rpb25zLCBtb2RlLCByZXBzLCBvbkNvbXBsZXRlLCBvbkV4aXQgfSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgW2N1cnJlbnRJbmRleCwgc2V0Q3VycmVudEluZGV4XSA9IHVzZVN0YXRlKDApO1xuICAgICAgICAgICAgY29uc3QgW3NlbGVjdGVkT3B0aW9uLCBzZXRTZWxlY3RlZE9wdGlvbl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICAgICAgICAgIGNvbnN0IFthbnN3ZXJzLCBzZXRBbnN3ZXJzXSA9IHVzZVN0YXRlKG5ldyBBcnJheShxdWVzdGlvbnMubGVuZ3RoKS5maWxsKG51bGwpKTtcbiAgICAgICAgICAgIGNvbnN0IFtkb3VidHMsIHNldERvdWJ0c10gPSB1c2VTdGF0ZShuZXcgU2V0KCkpO1xuICAgICAgICAgICAgY29uc3QgW3Nob3dGZWVkYmFjaywgc2V0U2hvd0ZlZWRiYWNrXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAgICAgICAgICAgY29uc3QgY3VycmVudFEgPSBxdWVzdGlvbnNbY3VycmVudEluZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzID0gKChjdXJyZW50SW5kZXggKyAxKSAvIHF1ZXN0aW9ucy5sZW5ndGgpICogMTAwO1xuXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVPcHRpb25TZWxlY3QgPSAoaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3JldmlldycgJiYgc2hvd0ZlZWRiYWNrKSByZXR1cm47XG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRPcHRpb24oaW5kZXgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0Fuc3dlcnMgPSBbLi4uYW5zd2Vyc107XG4gICAgICAgICAgICAgICAgbmV3QW5zd2Vyc1tjdXJyZW50SW5kZXhdID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgc2V0QW5zd2VycyhuZXdBbnN3ZXJzKTtcblxuICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAncmV2aWV3Jykge1xuICAgICAgICAgICAgICAgICAgICBzZXRTaG93RmVlZGJhY2sodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgaGFuZGxlTmV4dCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEluZGV4IDwgcXVlc3Rpb25zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudEluZGV4KHByZXYgPT4gcHJldiArIDEpO1xuICAgICAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZE9wdGlvbihudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2hvd0ZlZWRiYWNrKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hRdWl6KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgZmluaXNoUXVpeiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRzID0gcXVlc3Rpb25zLm1hcCgocSwgaSkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb246IHEsXG4gICAgICAgICAgICAgICAgICAgIGFuc3dlcjogYW5zd2Vyc1tpXSAhPT0gbnVsbCA/IGFuc3dlcnNbaV0gOiAtMSxcbiAgICAgICAgICAgICAgICAgICAgY29ycmVjdDogYW5zd2Vyc1tpXSA9PT0gcS5hbnN3ZXIsXG4gICAgICAgICAgICAgICAgICAgIGRvdWJ0OiBkb3VidHMuaGFzKGkpXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUocmVzdWx0cyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCB0b2dnbGVEb3VidCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdEb3VidHMgPSBuZXcgU2V0KGRvdWJ0cyk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld0RvdWJ0cy5oYXMoY3VycmVudEluZGV4KSkgbmV3RG91YnRzLmRlbGV0ZShjdXJyZW50SW5kZXgpO1xuICAgICAgICAgICAgICAgIGVsc2UgbmV3RG91YnRzLmFkZChjdXJyZW50SW5kZXgpO1xuICAgICAgICAgICAgICAgIHNldERvdWJ0cyhuZXdEb3VidHMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3Qgc2VhcmNoR29vZ2xlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5ID0gZW5jb2RlVVJJQ29tcG9uZW50KGN1cnJlbnRRLnF1ZXN0aW9uKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihgaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9zZWFyY2g/cT0ke3F1ZXJ5fWAsICdfYmxhbmsnKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IGdldE9wdGlvbkNsYXNzID0gKGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2UgPSBcInAtNCBib3JkZXItMiByb3VuZGVkLXhsIGN1cnNvci1wb2ludGVyIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gZ3JvdXAgXCI7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdyZXZpZXcnICYmIHNob3dGZWVkYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ID09PSBjdXJyZW50US5hbnN3ZXIpIHJldHVybiBiYXNlICsgXCJiZy1ncmVlbi0xMDAgYm9yZGVyLWdyZWVuLTUwMCB0ZXh0LWdyZWVuLTgwMCBmb250LW1lZGl1bVwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ID09PSBzZWxlY3RlZE9wdGlvbikgcmV0dXJuIGJhc2UgKyBcImJnLXJlZC0xMDAgYm9yZGVyLXJlZC01MDAgdGV4dC1yZWQtODAwXCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiYXNlICsgXCJib3JkZXItc2xhdGUtMjAwIG9wYWNpdHktNTAgY3Vyc29yLW5vdC1hbGxvd2VkXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkT3B0aW9uID09PSBpZHgpIHJldHVybiBiYXNlICsgXCJiZy1ibHVlLTUwIGJvcmRlci1ibHVlLTUwMCByaW5nLTEgcmluZy1ibHVlLTUwMCBzaGFkb3ctbWRcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZSArIFwiYmctd2hpdGUgYm9yZGVyLXNsYXRlLTIwMCBob3Zlcjpib3JkZXItYmx1ZS0zMDAgaG92ZXI6Ymctc2xhdGUtNTBcIjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy0zeGwgbXgtYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkV4aXR9IGNsYXNzTmFtZT1cInRleHQtc2xhdGUtNDAwIGhvdmVyOnRleHQtc2xhdGUtNjAwXCI+4pyVPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tb25vIHRleHQtc2xhdGUtNTAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRJbmRleCArIDF9IC8ge3F1ZXN0aW9ucy5sZW5ndGh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgY3Vyc29yLXBvaW50ZXIgc2VsZWN0LW5vbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtkb3VidHMuaGFzKGN1cnJlbnRJbmRleCl9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dG9nZ2xlRG91YnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1hbWJlci01MDAgcm91bmRlZCBmb2N1czpyaW5nLWFtYmVyLTUwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2B0ZXh0LXNtIGZvbnQtbWVkaXVtICR7ZG91YnRzLmhhcyhjdXJyZW50SW5kZXgpID8gJ3RleHQtYW1iZXItNjAwJyA6ICd0ZXh0LXNsYXRlLTQwMCd9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hcmNhciBEdWRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTIgYmctc2xhdGUtMjAwIHJvdW5kZWQtZnVsbCBtYi04IG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLWZ1bGwgYmctZ3JhZGllbnQtdG8tciBmcm9tLWJsdWUtNTAwIHRvLWluZGlnby02MDAgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tNTAwIGVhc2Utb3V0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYCR7cHJvZ3Jlc3N9JWAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC0yeGwgc2hhZG93LXhsIGJvcmRlciBib3JkZXItc2xhdGUtMTAwIHAtNiBtZDpwLTEwIG1iLTYgcmVsYXRpdmUgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0wIGxlZnQtMCB3LWZ1bGwgaC0xIGJnLWdyYWRpZW50LXRvLXIgZnJvbS1ibHVlLTQwMCB0by1pbmRpZ28tNDAwXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2sgYmctc2xhdGUtMTAwIHRleHQtc2xhdGUtNjAwIHRleHQteHMgZm9udC1ib2xkIHB4LTIgcHktMSByb3VuZGVkIG1iLTQgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRXDDrWdyYWZlIHtjdXJyZW50US5lcGlncmFmZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIG1kOnRleHQtMnhsIGZvbnQtc2VtaWJvbGQgdGV4dC1zbGF0ZS04MDAgbWItOCBsZWFkaW5nLXJlbGF4ZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudFEucXVlc3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2gyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudFEub3B0aW9ucy5tYXAoKG9wdCwgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVPcHRpb25TZWxlY3QoaWR4KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Z2V0T3B0aW9uQ2xhc3MoaWR4KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgdy04IGgtOCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYm9yZGVyLTIgdGV4dC1zbSBmb250LWJvbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHttb2RlID09PSAncmV2aWV3JyAmJiBzaG93RmVlZGJhY2sgJiYgaWR4ID09PSBjdXJyZW50US5hbnN3ZXIgPyAnYm9yZGVyLWdyZWVuLTYwMCBiZy1ncmVlbi02MDAgdGV4dC13aGl0ZScgOiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9uID09PSBpZHggPyAnYm9yZGVyLWJsdWUtNTAwIGJnLWJsdWUtNTAwIHRleHQtd2hpdGUnIDogJ2JvcmRlci1zbGF0ZS0zMDAgdGV4dC1zbGF0ZS00MDAgZ3JvdXAtaG92ZXI6Ym9yZGVyLWJsdWUtMzAwJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1N0cmluZy5mcm9tQ2hhckNvZGUoNjUgKyBpZHgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntvcHR9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bW9kZSA9PT0gJ3JldmlldycgJiYgc2hvd0ZlZWRiYWNrICYmIGlkeCA9PT0gY3VycmVudFEuYW5zd2VyICYmIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JlZW4tNjAwXCI+4pyUPC9zcGFuPn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttb2RlID09PSAncmV2aWV3JyAmJiBzaG93RmVlZGJhY2sgJiYgaWR4ID09PSBzZWxlY3RlZE9wdGlvbiAmJiBpZHggIT09IGN1cnJlbnRRLmFuc3dlciAmJiA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXJlZC01MDBcIj7inJY8L3NwYW4+fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAge21vZGUgPT09ICdyZXZpZXcnICYmIHNob3dGZWVkYmFjayAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC04IHB0LTYgYm9yZGVyLXQgYm9yZGVyLXNsYXRlLTEwMCBhbmltYXRlLWZhZGUtaW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1ib2xkIHRleHQtc2xhdGUtNTAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlIG1iLTJcIj5FeHBsaWNhY2nDs248L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNsYXRlLTcwMCBiZy1zbGF0ZS01MCBwLTQgcm91bmRlZC1sZyBib3JkZXItbC00IGJvcmRlci1zbGF0ZS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50US5leHBsYW5hdGlvbiB8fCBcIlNpbiBleHBsaWNhY2nDs24gcHJlZGVmaW5pZGEuXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3NlYXJjaEdvb2dsZX0gY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXNsYXRlLTYwMCBob3Zlcjp0ZXh0LXNsYXRlLTgwMCBiZy13aGl0ZSBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCBob3ZlcjpiZy1zbGF0ZS01MCBweC0zIHB5LTIgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9yc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJ1c2NhciBlbiBHb29nbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZU5leHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3NlbGVjdGVkT3B0aW9uID09PSBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBweC04IHB5LTMgcm91bmRlZC14bCBmb250LWJvbGQgc2hhZG93LWxnIHRyYW5zaXRpb24tYWxsIHRyYW5zZm9ybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3NlbGVjdGVkT3B0aW9uID09PSBudWxsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnYmctc2xhdGUtMjAwIHRleHQtc2xhdGUtNDAwIGN1cnNvci1ub3QtYWxsb3dlZCcgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIGhvdmVyOmJnLWJsdWUtNzAwIGhvdmVyOi10cmFuc2xhdGUteS0xIGhvdmVyOnNoYWRvdy1ibHVlLTIwMC81MCd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudEluZGV4ID09PSBxdWVzdGlvbnMubGVuZ3RoIC0gMSA/ICdGaW5hbGl6YXIgRXhhbWVuJyA6ICdTaWd1aWVudGUnfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyAtLS0gQ09NUE9ORU5UOiBBcHAgLS0tXG4gICAgICAgIGNvbnN0IEFwcCA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgcXVlc3Rpb25zLCByZXBzLCBsb2FkaW5nLCBhZGRRdWVzdGlvbiwgdXBkYXRlUXVlc3Rpb24sIGRlbGV0ZVF1ZXN0aW9uLCB1cGRhdGVSZXAsIGltcG9ydFF1ZXN0aW9ucywgcmVzZXRQcm9ncmVzcywgc2V0UXVlc3Rpb25zIH0gPSB1c2VRdWVzdGlvbkJhbmsoKTtcbiAgICAgICAgICAgIGNvbnN0IFttb2RlLCBzZXRNb2RlXSA9IHVzZVN0YXRlKCdzdGFydCcpO1xuICAgICAgICAgICAgY29uc3QgW3F1aXpNb2RlLCBzZXRRdWl6TW9kZV0gPSB1c2VTdGF0ZSgncmV2aWV3Jyk7XG4gICAgICAgICAgICBjb25zdCBbYWN0aXZlUXVlc3Rpb25zLCBzZXRBY3RpdmVRdWVzdGlvbnNdID0gdXNlU3RhdGUoW10pO1xuICAgICAgICAgICAgY29uc3QgW3F1aXpSZXN1bHRzLCBzZXRRdWl6UmVzdWx0c10gPSB1c2VTdGF0ZShbXSk7XG4gICAgICAgICAgICBjb25zdCBbc2VsZWN0ZWRFcGksIHNldFNlbGVjdGVkRXBpXSA9IHVzZVN0YXRlKCdhbGwnKTtcbiAgICAgICAgICAgIGNvbnN0IFtudW1RdWVzdGlvbnMsIHNldE51bVF1ZXN0aW9uc10gPSB1c2VTdGF0ZSgyNCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGVwaWdyYWZlcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQocXVlc3Rpb25zLm1hcChxID0+IHEuZXBpZ3JhZmUpKSkuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuICAgICAgICAgICAgfSwgW3F1ZXN0aW9uc10pO1xuXG4gICAgICAgICAgICBjb25zdCBzdGF0cyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsID0gcXVlc3Rpb25zLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHVkaWVkID0gT2JqZWN0LmtleXMocmVwcykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hc3RlcmVkID0gT2JqZWN0LnZhbHVlcyhyZXBzKS5maWx0ZXIociA9PiByLmVmID4gMi41KS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdG90YWwsIHN0dWRpZWQsIG1hc3RlcmVkIH07XG4gICAgICAgICAgICB9LCBbcXVlc3Rpb25zLCByZXBzXSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0UXVpeiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgIGxldCBwb29sID0gcXVlc3Rpb25zLmZpbHRlcihxID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkRXBpICE9PSAnYWxsJyAmJiBxLmVwaWdyYWZlICE9PSBOdW1iZXIoc2VsZWN0ZWRFcGkpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSByZXBzW3EuaWRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHJldHVybiB0cnVlOyBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIubmV4dCA8PSBub3c7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAocG9vbC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJObyBoYXkgcHJlZ3VudGFzIHBlbmRpZW50ZXMgcGFyYSByZXBhc2FyIGVuIGVzdGUgY3JpdGVyaW8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFNodWZmbGVcbiAgICAgICAgICAgICAgICBwb29sID0gcG9vbC5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpLnNsaWNlKDAsIG51bVF1ZXN0aW9ucyk7XG4gICAgICAgICAgICAgICAgc2V0QWN0aXZlUXVlc3Rpb25zKHBvb2wpO1xuICAgICAgICAgICAgICAgIHNldE1vZGUoJ3F1aXonKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZVF1aXpDb21wbGV0ZSA9IChyZXN1bHRzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5mb3JFYWNoKHIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdSZXAgPSBjYWxjdWxhdGVTTTIoci5xdWVzdGlvbiwgci5jb3JyZWN0LCByZXBzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIuZG91YnQpIG5ld1JlcC5kdWRhID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlUmVwKHIucXVlc3Rpb24uaWQsIG5ld1JlcCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc2V0UXVpelJlc3VsdHMocmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgc2V0TW9kZSgncmVzdWx0cycpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgZG93bmxvYWRCYWNrdXAgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YVN0ciA9IEpTT04uc3RyaW5naWZ5KHF1ZXN0aW9ucywgbnVsbCwgMik7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YVVyaSA9ICdkYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCwnKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YVN0cik7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwb3J0RmlsZURlZmF1bHROYW1lID0gJ3F1ZXN0aW9uc19iYWNrdXAuanNvbic7XG4gICAgICAgICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICAgICAgbGlua0VsZW1lbnQuc2V0QXR0cmlidXRlKCdocmVmJywgZGF0YVVyaSk7XG4gICAgICAgICAgICAgICAgbGlua0VsZW1lbnQuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIGV4cG9ydEZpbGVEZWZhdWx0TmFtZSk7XG4gICAgICAgICAgICAgICAgbGlua0VsZW1lbnQuY2xpY2soKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChsb2FkaW5nKSByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtc2NyZWVuIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXNsYXRlLTUwMFwiPkNhcmdhbmRvLi4uPC9kaXY+O1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIHAtNCBtZDpwLTggYmctc2xhdGUtMTAwIGZvbnQtc2Fuc1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1heC13LTR4bCBteC1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bW9kZSA9PT0gJ3N0YXJ0JyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLTJ4bCBzaGFkb3cteGwgYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAgcC04IG1kOnAtMTIgYW5pbWF0ZS1mYWRlLWluXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoZWFkZXIgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgbWItMTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTR4bCBmb250LWV4dHJhYm9sZCB0ZXh0LXRyYW5zcGFyZW50IGJnLWNsaXAtdGV4dCBiZy1ncmFkaWVudC10by1yIGZyb20tYmx1ZS02MDAgdG8tcHVycGxlLTYwMCBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXhhbWVuIFRNQSBQYXJ0ZSA2NlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc2xhdGUtNTAwIHRleHQtbGdcIj5WZXJzacOzbiBMb2NhbCAtIFNpbiBDb25leGnDs248L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaGVhZGVyPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMyBnYXAtNiBtYi04XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXNsYXRlLTUwIHAtNCByb3VuZGVkLXhsIHRleHQtY2VudGVyIGJvcmRlciBib3JkZXItc2xhdGUtMTAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC0zeGwgZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwXCI+e3N0YXRzLnRvdGFsfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtc2xhdGUtNDAwIHVwcGVyY2FzZSBmb250LXNlbWlib2xkXCI+UHJlZ3VudGFzPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWJsdWUtNTAgcC00IHJvdW5kZWQteGwgdGV4dC1jZW50ZXIgYm9yZGVyIGJvcmRlci1ibHVlLTEwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtM3hsIGZvbnQtYm9sZCB0ZXh0LWJsdWUtNjAwXCI+e3N0YXRzLnN0dWRpZWR9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ibHVlLTQwMCB1cHBlcmNhc2UgZm9udC1zZW1pYm9sZFwiPkVzdHVkaWFkYXM8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JlZW4tNTAgcC00IHJvdW5kZWQteGwgdGV4dC1jZW50ZXIgYm9yZGVyIGJvcmRlci1ncmVlbi0xMDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LTN4bCBmb250LWJvbGQgdGV4dC1ncmVlbi02MDBcIj57c3RhdHMubWFzdGVyZWR9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmVlbi00MDAgdXBwZXJjYXNlIGZvbnQtc2VtaWJvbGRcIj5Eb21pbmFkYXM8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTYgbWF4LXctbWQgbXgtYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDBcIj5Nb2RvPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggYmctc2xhdGUtMTAwIHAtMSByb3VuZGVkLWxnXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0UXVpek1vZGUoJ3JldmlldycpfSBjbGFzc05hbWU9e2BmbGV4LTEgcHktMiByb3VuZGVkLW1kIHRleHQtc20gZm9udC1tZWRpdW0gdHJhbnNpdGlvbi1hbGwgJHtxdWl6TW9kZSA9PT0gJ3JldmlldycgPyAnYmctd2hpdGUgc2hhZG93IHRleHQtYmx1ZS02MDAnIDogJ3RleHQtc2xhdGUtNTAwJ31gfT5SZXBhc288L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRRdWl6TW9kZSgnZXhhbScpfSBjbGFzc05hbWU9e2BmbGV4LTEgcHktMiByb3VuZGVkLW1kIHRleHQtc20gZm9udC1tZWRpdW0gdHJhbnNpdGlvbi1hbGwgJHtxdWl6TW9kZSA9PT0gJ2V4YW0nID8gJ2JnLXdoaXRlIHNoYWRvdyB0ZXh0LWJsdWUtNjAwJyA6ICd0ZXh0LXNsYXRlLTUwMCd9YH0+RXhhbWVuPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwXCI+RXDDrWdyYWZlPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IHZhbHVlPXtzZWxlY3RlZEVwaX0gb25DaGFuZ2U9eyhlKSA9PiBzZXRTZWxlY3RlZEVwaShlLnRhcmdldC52YWx1ZSl9IGNsYXNzTmFtZT1cInctZnVsbCBwLTMgYmctd2hpdGUgYm9yZGVyIGJvcmRlci1zbGF0ZS0zMDAgcm91bmRlZC14bCBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMCBvdXRsaW5lLW5vbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImFsbFwiPlRvZG9zPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlcGlncmFmZXMubWFwKGUgPT4gPG9wdGlvbiBrZXk9e2V9IHZhbHVlPXtlfT5FcMOtZ3JhZmUge2V9PC9vcHRpb24+KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDBcIj5DYW50aWRhZDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBtaW49XCI1XCIgbWF4PVwiMTAwXCIgdmFsdWU9e251bVF1ZXN0aW9uc30gb25DaGFuZ2U9eyhlKSA9PiBzZXROdW1RdWVzdGlvbnMoTnVtYmVyKGUudGFyZ2V0LnZhbHVlKSl9IGNsYXNzTmFtZT1cInctZnVsbCBwLTMgYmctd2hpdGUgYm9yZGVyIGJvcmRlci1zbGF0ZS0zMDAgcm91bmRlZC14bCBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMCBvdXRsaW5lLW5vbmVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3N0YXJ0UXVpen0gY2xhc3NOYW1lPVwidy1mdWxsIHB5LTQgYmctZ3JhZGllbnQtdG8tciBmcm9tLWJsdWUtNjAwIHRvLWluZGlnby02MDAgdGV4dC13aGl0ZSBmb250LWJvbGQgcm91bmRlZC14bCBzaGFkb3ctbGcgaG92ZXI6c2hhZG93LXhsIGhvdmVyOi10cmFuc2xhdGUteS0xIHRyYW5zaXRpb24tYWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29tZW56YXIgUHLDoWN0aWNhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMiBnYXAtNCBtdC00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRNb2RlKCdhZG1pbicpfSBjbGFzc05hbWU9XCJ0ZXh0LXNsYXRlLTUwMCB0ZXh0LXNtIGhvdmVyOnRleHQtc2xhdGUtODAwXCI+4pqZ77iPIEFkbWluPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB7aWYod2luZG93LmNvbmZpcm0oXCLCv1Jlc2V0ZWFyIHRvZG8/XCIpKSByZXNldFByb2dyZXNzKCl9fSBjbGFzc05hbWU9XCJ0ZXh0LXJlZC00MDAgdGV4dC1zbSBob3Zlcjp0ZXh0LXJlZC02MDBcIj7ihrogUmVzZXQ8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttb2RlID09PSAncXVpeicgJiYgPFF1aXpTY3JlZW4gcXVlc3Rpb25zPXthY3RpdmVRdWVzdGlvbnN9IG1vZGU9e3F1aXpNb2RlfSByZXBzPXtyZXBzfSBvbkNvbXBsZXRlPXtoYW5kbGVRdWl6Q29tcGxldGV9IG9uRXhpdD17KCkgPT4gc2V0TW9kZSgnc3RhcnQnKX0gLz59XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttb2RlID09PSAncmVzdWx0cycgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC0yeGwgc2hhZG93LXhsIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIHAtOCBhbmltYXRlLWZhZGUtaW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBtYi04XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC0zeGwgZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIG1iLTJcIj5SZXN1bHRhZG9zPC9oMj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC02eGwgZm9udC1ibGFjayB0ZXh0LWJsdWUtNjAwIG1iLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7TWF0aC5yb3VuZCgocXVpelJlc3VsdHMuZmlsdGVyKHIgPT4gci5jb3JyZWN0KS5sZW5ndGggLyBxdWl6UmVzdWx0cy5sZW5ndGgpICogMTAwKX0lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc2xhdGUtNTAwXCI+e3F1aXpSZXN1bHRzLmZpbHRlcihyID0+IHIuY29ycmVjdCkubGVuZ3RofSBjb3JyZWN0YXMgZGUge3F1aXpSZXN1bHRzLmxlbmd0aH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXIgZ2FwLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0TW9kZSgnc3RhcnQnKX0gY2xhc3NOYW1lPVwicHgtNiBweS0zIGJnLXNsYXRlLTIwMCB0ZXh0LXNsYXRlLTcwMCBmb250LWJvbGQgcm91bmRlZC14bCBob3ZlcjpiZy1zbGF0ZS0zMDBcIj5Wb2x2ZXI8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB7bW9kZSA9PT0gJ2FkbWluJyAmJiA8QWRtaW5QYW5lbCBxdWVzdGlvbnM9e3F1ZXN0aW9uc30gb25JbXBvcnQ9e2ltcG9ydFF1ZXN0aW9uc30gb25EZWxldGVBbGw9eygpID0+IHNldFF1ZXN0aW9ucyhbXSl9IG9uRGVsZXRlRXBpZ3JhZmU9eyhlcGkpID0+IHNldFF1ZXN0aW9ucyhxdWVzdGlvbnMuZmlsdGVyKHEgPT4gcS5lcGlncmFmZSAhPT0gZXBpKSl9IG9uRGVsZXRlUXVlc3Rpb249e2RlbGV0ZVF1ZXN0aW9ufSBvblVwZGF0ZVF1ZXN0aW9uPXt1cGRhdGVRdWVzdGlvbn0gb25FeHBvcnQ9e2Rvd25sb2FkQmFja3VwfSBvbkJhY2s9eygpID0+IHNldE1vZGUoJ3N0YXJ0Jyl9IC8+fVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgcm9vdCA9IFJlYWN0RE9NLmNyZWF0ZVJvb3QoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSk7XG4gICAgICAgIHJvb3QucmVuZGVyKDxBcHAgLz4pO1xuICAgICJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ1EsSUFBQUEsTUFBQSxHQUFzREMsS0FBSztFQUFuREMsUUFBUSxHQUFBRixNQUFBLENBQVJFLFFBQVE7RUFBRUMsU0FBUyxHQUFBSCxNQUFBLENBQVRHLFNBQVM7RUFBRUMsT0FBTyxHQUFBSixNQUFBLENBQVBJLE9BQU87RUFBRUMsV0FBVyxHQUFBTCxNQUFBLENBQVhLLFdBQVc7O0FBRWpEO0FBQ0EsSUFBTUMsWUFBWSxHQUFHLFNBQWZBLFlBQVlBLENBQUlDLFFBQVEsRUFBRUMsU0FBUyxFQUFFQyxXQUFXLEVBQUs7RUFDdkQsSUFBTUMsR0FBRyxHQUFHQyxJQUFJLENBQUNELEdBQUcsQ0FBQyxDQUFDO0VBQ3RCLElBQU1FLFVBQVUsR0FBRyxHQUFHO0VBQ3RCLElBQU1D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</script></head>
<body class="bg-slate-100 text-slate-800 antialiased">
    <div id="root"><div class="min-h-screen p-4 md:p-8 bg-slate-100 font-sans"><div class="max-w-4xl mx-auto"><div class="space-y-6 animate-fade-in"><div class="flex justify-between items-center mb-4"><h2 class="text-2xl font-bold text-slate-800">Administración</h2><button class="text-sm text-slate-500 hover:text-slate-800">← Volver</button></div><div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200 grid grid-cols-1 md:grid-cols-2 gap-4"><div class="space-y-2"><h3 class="font-semibold text-slate-700">Importar/Exportar</h3><div class="flex flex-wrap gap-2"><label class="bg-blue-50 text-blue-600 px-3 py-1 rounded text-sm cursor-pointer hover:bg-blue-100">Subir JSON<input type="file" class="hidden" accept=".json"></label><button class="bg-slate-100 text-slate-600 px-3 py-1 rounded text-sm hover:bg-slate-200">Exportar JSON</button><button class="bg-purple-100 text-purple-700 px-3 py-1 rounded text-sm hover:bg-purple-200 border border-purple-200">💾 Backup App + Datos</button></div><textarea class="w-full text-xs border p-2 rounded mt-2" rows="2" placeholder="Pegar JSON aquí..."></textarea><button disabled="" class="bg-blue-600 text-white hover:bg-blue-700 text-xs py-1 px-2 w-full rounded">Importar Texto</button></div><div class="space-y-2"><h3 class="font-semibold text-red-700">Zona de Peligro</h3><div class="flex gap-2 items-center"><select class="border p-2 rounded text-sm w-full"><option value="">Seleccionar Epígrafe...</option></select><button disabled="" class="bg-red-100 text-red-700 px-3 py-2 rounded hover:bg-red-200 disabled:opacity-50 text-sm whitespace-nowrap">Borrar Epi</button></div><button class="w-full bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700 text-sm">Borrar Banco Completo</button></div></div><div class="space-y-2"><input type="text" placeholder="Buscar pregunta..." class="w-full border p-2 rounded-lg" value=""><div class="max-h-[600px] overflow-y-auto space-y-2 pr-1"><p class="text-center text-slate-400">No hay preguntas</p></div></div></div></div></div></div>

    <!-- AQUI ESTA TODA LA LOGICA DE LA APLICACION -->
    <script type="text/babel">
        const { useState, useEffect, useMemo, useCallback } = React;

        // --- UTILS: SM2 Algorithm ---
        const calculateSM2 = (question, isCorrect, currentReps) => {
            const now = Date.now();
            const DEFAULT_EF = 2.5;
            const prev = currentReps[question.id] || { 
                ef: DEFAULT_EF, 
                rep: 0, 
                interval: 0, 
                epigrafe: question.epigrafe,
                next: 0 
            };

            let newRep = { ...prev, lastResult: isCorrect };

            if (isCorrect) {
                newRep.rep = prev.rep + 1;
                if (newRep.rep === 1) {
                    newRep.interval = 1;
                } else if (newRep.rep === 2) {
                    newRep.interval = 6;
                } else {
                    newRep.interval = Math.round(prev.interval * prev.ef);
                }
                newRep.ef = Math.max(1.3, prev.ef + 0.1);
                newRep.next = now + newRep.interval * 24 * 60 * 60 * 1000;
            } else {
                newRep.rep = 0;
                newRep.interval = 0;
                newRep.next = now;
            }
            return newRep;
        };

        // --- HOOK: Question Bank ---
        const generateUID = () => Math.random().toString(36).substr(2, 9);
        
        const INITIAL_QUESTIONS = [];

        const useQuestionBank = () => {
            const [questions, setQuestions] = useState([]);
            const [reps, setReps] = useState({});
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                const storedQ = localStorage.getItem('qBank');
                const storedR = localStorage.getItem('reps');
                if (storedQ) setQuestions(JSON.parse(storedQ));
                else setQuestions(INITIAL_QUESTIONS);
                
                if (storedR) setReps(JSON.parse(storedR));
                setLoading(false);
            }, []);

            useEffect(() => {
                if (!loading) localStorage.setItem('qBank', JSON.stringify(questions));
            }, [questions, loading]);

            useEffect(() => {
                if (!loading) localStorage.setItem('reps', JSON.stringify(reps));
            }, [reps, loading]);

            const addQuestion = (q) => {
                const newQ = { ...q, id: generateUID() };
                setQuestions(prev => [...prev, newQ]);
            };

            const updateQuestion = (id, updated) => {
                setQuestions(prev => prev.map(q => q.id === id ? { ...q, ...updated } : q));
            };

            const deleteQuestion = (id) => {
                setQuestions(prev => prev.filter(q => q.id !== id));
                const newReps = { ...reps };
                delete newReps[id];
                setReps(newReps);
            };

            const updateRep = (id, data) => {
                setReps(prev => ({ ...prev, [id]: data }));
            };
            
            const resetProgress = () => setReps({});

            const importQuestions = (imported, replace = false) => {
                const valid = imported.filter(q => q.question && q.options && typeof q.answer === 'number');
                const prepared = valid.map(q => ({...q, id: q.id || generateUID()}));
                if (replace) {
                    setQuestions(prepared);
                    setReps({});
                } else {
                    setQuestions(prev => [...prev, ...prepared]);
                }
            };

            return { questions, reps, loading, addQuestion, updateQuestion, deleteQuestion, updateRep, resetProgress, importQuestions, setQuestions };
        };

        // --- COMPONENT: AdminPanel ---
        const AdminPanel = ({ questions, onImport, onDeleteAll, onDeleteEpigrafe, onDeleteQuestion, onUpdateQuestion, onExport, onBack }) => {
            const [jsonInput, setJsonInput] = useState('');
            const [searchTerm, setSearchTerm] = useState('');
            const [editingId, setEditingId] = useState(null);
            const [editForm, setEditForm] = useState({});
            const [selectedEpiDelete, setSelectedEpiDelete] = useState('');

            const epigrafes = Array.from(new Set(questions.map(q => q.epigrafe))).sort((a, b) => a - b);

            const handleFileUpload = (e) => {
                const file = e.target.files?.[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = (ev) => {
                    try {
                        const data = JSON.parse(ev.target?.result);
                        onImport(data, false);
                        alert('Importado correctamente');
                    } catch (err) { alert('JSON inválido'); }
                };
                reader.readAsText(file);
            };

            const handleJsonPaste = () => {
                try {
                    const data = JSON.parse(jsonInput);
                    onImport(data, false);
                    setJsonInput('');
                    alert('Importado correctamente');
                } catch (err) { alert('JSON inválido'); }
            };
            
            const handleHtmlBackup = () => {
                const html = document.documentElement.outerHTML;
                const questionsJson = JSON.stringify(questions, null, 2);
                // Reemplazamos la const INITIAL_QUESTIONS con el estado actual
                const regex = /const INITIAL_QUESTIONS = \[[\s\S]*?\];/;
                
                if (!regex.test(html)) {
                    alert("No se pudo generar el backup: No se encontró la estructura de datos original.");
                    return;
                }
                
                const newHtml = html.replace(regex, `const INITIAL_QUESTIONS = ${questionsJson};`);
                
                const blob = new Blob([newHtml], {type: 'text/html'});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `LMA_Prep_Backup_${new Date().toISOString().slice(0,10)}.html`;
                a.click();
            };

            const startEdit = (q) => {
                setEditingId(q.id);
                setEditForm({ ...q });
            };

            const saveEdit = () => {
                if (editingId && editForm) {
                    onUpdateQuestion(editingId, editForm);
                    setEditingId(null);
                }
            };

            const filteredQuestions = questions.filter(q => 
                q.question.toLowerCase().includes(searchTerm.toLowerCase()) ||
                q.epigrafe.toString().includes(searchTerm)
            );

            return (
                <div className="space-y-6 animate-fade-in">
                    <div className="flex justify-between items-center mb-4">
                        <h2 className="text-2xl font-bold text-slate-800">Administración</h2>
                        <button onClick={onBack} className="text-sm text-slate-500 hover:text-slate-800">← Volver</button>
                    </div>

                    <div className="bg-white p-4 rounded-xl shadow-sm border border-slate-200 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div className="space-y-2">
                            <h3 className="font-semibold text-slate-700">Importar/Exportar</h3>
                            <div className="flex flex-wrap gap-2">
                                <label className="bg-blue-50 text-blue-600 px-3 py-1 rounded text-sm cursor-pointer hover:bg-blue-100">
                                    Subir JSON
                                    <input type="file" className="hidden" accept=".json" onChange={handleFileUpload} />
                                </label>
                                <button onClick={onExport} className="bg-slate-100 text-slate-600 px-3 py-1 rounded text-sm hover:bg-slate-200">Exportar JSON</button>
                                <button onClick={handleHtmlBackup} className="bg-purple-100 text-purple-700 px-3 py-1 rounded text-sm hover:bg-purple-200 border border-purple-200">
                                    💾 Backup App + Datos
                                </button>
                            </div>
                            <textarea 
                                className="w-full text-xs border p-2 rounded mt-2" 
                                rows={2} 
                                placeholder="Pegar JSON aquí..."
                                value={jsonInput}
                                onChange={(e) => setJsonInput(e.target.value)}
                            />
                            <button onClick={handleJsonPaste} disabled={!jsonInput} className="bg-blue-600 text-white hover:bg-blue-700 text-xs py-1 px-2 w-full rounded">Importar Texto</button>
                        </div>

                        <div className="space-y-2">
                            <h3 className="font-semibold text-red-700">Zona de Peligro</h3>
                            <div className="flex gap-2 items-center">
                                <select 
                                    className="border p-2 rounded text-sm w-full"
                                    value={selectedEpiDelete}
                                    onChange={(e) => setSelectedEpiDelete(e.target.value)}
                                >
                                    <option value="">Seleccionar Epígrafe...</option>
                                    {epigrafes.map(e => <option key={e} value={e}>{e}</option>)}
                                </select>
                                <button 
                                    onClick={() => {
                                        if(window.confirm(`¿Borrar todo el epígrafe ${selectedEpiDelete}?`)) 
                                        onDeleteEpigrafe(Number(selectedEpiDelete));
                                    }}
                                    disabled={!selectedEpiDelete}
                                    className="bg-red-100 text-red-700 px-3 py-2 rounded hover:bg-red-200 disabled:opacity-50 text-sm whitespace-nowrap"
                                >
                                    Borrar Epi
                                </button>
                            </div>
                            <button 
                                onClick={() => { if(window.confirm("¿Borrar TODAS las preguntas?")) onDeleteAll(); }}
                                className="w-full bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700 text-sm"
                            >
                                Borrar Banco Completo
                            </button>
                        </div>
                    </div>

                    <div className="space-y-2">
                        <input 
                            type="text" 
                            placeholder="Buscar pregunta..." 
                            className="w-full border p-2 rounded-lg"
                            value={searchTerm}
                            onChange={(e) => setSearchTerm(e.target.value)}
                        />
                        <div className="max-h-[600px] overflow-y-auto space-y-2 pr-1">
                            {filteredQuestions.slice(0, 50).map(q => (
                                <div key={q.id} className="bg-white p-3 rounded-lg border shadow-sm hover:shadow-md transition-shadow">
                                    {editingId === q.id ? (
                                        <div className="space-y-2">
                                            <div className="flex gap-2">
                                                <input type="number" value={editForm.epigrafe} onChange={e => setEditForm({...editForm, epigrafe: Number(e.target.value)})} className="border p-1 rounded w-20 text-sm" placeholder="Epi" />
                                                <input type="number" value={editForm.answer} onChange={e => setEditForm({...editForm, answer: Number(e.target.value)})} className="border p-1 rounded w-20 text-sm" placeholder="Correcta (idx)" />
                                            </div>
                                            <input className="border p-1 rounded w-full font-semibold text-sm" value={editForm.question} onChange={e => setEditForm({...editForm, question: e.target.value})} />
                                            <textarea className="border p-1 rounded w-full text-sm" value={editForm.options?.join('|')} onChange={e => setEditForm({...editForm, options: e.target.value.split('|')})} placeholder="Opciones separadas por |" />
                                            <div className="flex gap-2 justify-end">
                                                <button onClick={() => setEditingId(null)} className="text-slate-500 text-sm">Cancelar</button>
                                                <button onClick={saveEdit} className="text-green-600 font-bold text-sm">Guardar</button>
                                            </div>
                                        </div>
                                    ) : (
                                        <div className="flex justify-between items-start gap-4">
                                            <div>
                                                <span className="text-xs font-bold text-blue-600 bg-blue-50 px-2 py-0.5 rounded">Epi {q.epigrafe}</span>
                                                <p className="font-medium mt-1 text-slate-800 text-sm">{q.question}</p>
                                                <p className="text-xs text-slate-500 mt-1">{q.options.length} opciones. Resp: {q.answer}</p>
                                            </div>
                                            <div className="flex flex-col gap-1">
                                                <button onClick={() => startEdit(q)} className="text-xs bg-amber-100 text-amber-800 px-2 py-1 rounded">Editar</button>
                                                <button onClick={() => {if(window.confirm('¿Eliminar?')) onDeleteQuestion(q.id)}} className="text-xs bg-red-100 text-red-800 px-2 py-1 rounded">Borrar</button>
                                            </div>
                                        </div>
                                    )}
                                </div>
                            ))}
                            {filteredQuestions.length === 0 && <p className="text-center text-slate-400">No hay preguntas</p>}
                        </div>
                    </div>
                </div>
            );
        };

        // --- COMPONENT: QuizScreen ---
        const QuizScreen = ({ questions, mode, reps, onComplete, onExit }) => {
            const [currentIndex, setCurrentIndex] = useState(0);
            const [selectedOption, setSelectedOption] = useState(null);
            const [answers, setAnswers] = useState(new Array(questions.length).fill(null));
            const [doubts, setDoubts] = useState(new Set());
            const [showFeedback, setShowFeedback] = useState(false);

            const currentQ = questions[currentIndex];
            const progress = ((currentIndex + 1) / questions.length) * 100;

            const handleOptionSelect = (index) => {
                if (mode === 'review' && showFeedback) return;
                setSelectedOption(index);
                
                const newAnswers = [...answers];
                newAnswers[currentIndex] = index;
                setAnswers(newAnswers);

                if (mode === 'review') {
                    setShowFeedback(true);
                }
            };

            const handleNext = () => {
                if (currentIndex < questions.length - 1) {
                    setCurrentIndex(prev => prev + 1);
                    setSelectedOption(null);
                    setShowFeedback(false);
                } else {
                    finishQuiz();
                }
            };

            const finishQuiz = () => {
                const results = questions.map((q, i) => ({
                    question: q,
                    answer: answers[i] !== null ? answers[i] : -1,
                    correct: answers[i] === q.answer,
                    doubt: doubts.has(i)
                }));
                onComplete(results);
            };

            const toggleDoubt = () => {
                const newDoubts = new Set(doubts);
                if (newDoubts.has(currentIndex)) newDoubts.delete(currentIndex);
                else newDoubts.add(currentIndex);
                setDoubts(newDoubts);
            };

            const searchGoogle = () => {
                const query = encodeURIComponent(currentQ.question);
                window.open(`https://www.google.com/search?q=${query}`, '_blank');
            };

            const getOptionClass = (idx) => {
                const base = "p-4 border-2 rounded-xl cursor-pointer transition-all duration-200 flex items-center justify-between group ";
                
                if (mode === 'review' && showFeedback) {
                    if (idx === currentQ.answer) return base + "bg-green-100 border-green-500 text-green-800 font-medium";
                    if (idx === selectedOption) return base + "bg-red-100 border-red-500 text-red-800";
                    return base + "border-slate-200 opacity-50 cursor-not-allowed";
                }

                if (selectedOption === idx) return base + "bg-blue-50 border-blue-500 ring-1 ring-blue-500 shadow-md";
                return base + "bg-white border-slate-200 hover:border-blue-300 hover:bg-slate-50";
            };

            return (
                <div className="max-w-3xl mx-auto">
                    <div className="flex justify-between items-center mb-6">
                        <div className="flex items-center gap-4">
                            <button onClick={onExit} className="text-slate-400 hover:text-slate-600">✕</button>
                            <span className="font-mono text-slate-500 text-sm">
                                {currentIndex + 1} / {questions.length}
                            </span>
                        </div>
                        <label className="flex items-center gap-2 cursor-pointer select-none">
                            <input 
                                type="checkbox" 
                                checked={doubts.has(currentIndex)} 
                                onChange={toggleDoubt}
                                className="w-4 h-4 text-amber-500 rounded focus:ring-amber-500"
                            />
                            <span className={`text-sm font-medium ${doubts.has(currentIndex) ? 'text-amber-600' : 'text-slate-400'}`}>
                                Marcar Duda
                            </span>
                        </label>
                    </div>

                    <div className="h-2 bg-slate-200 rounded-full mb-8 overflow-hidden">
                        <div 
                            className="h-full bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-500 ease-out"
                            style={{ width: `${progress}%` }}
                        />
                    </div>

                    <div className="bg-white rounded-2xl shadow-xl border border-slate-100 p-6 md:p-10 mb-6 relative overflow-hidden">
                        <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-400 to-indigo-400"></div>
                        <span className="inline-block bg-slate-100 text-slate-600 text-xs font-bold px-2 py-1 rounded mb-4 uppercase tracking-wider">
                            Epígrafe {currentQ.epigrafe}
                        </span>
                        <h2 className="text-xl md:text-2xl font-semibold text-slate-800 mb-8 leading-relaxed">
                            {currentQ.question}
                        </h2>
                        <div className="space-y-3">
                            {currentQ.options.map((opt, idx) => (
                                <div 
                                    key={idx} 
                                    onClick={() => handleOptionSelect(idx)}
                                    className={getOptionClass(idx)}
                                >
                                    <div className="flex items-center gap-4">
                                        <div className={`w-8 h-8 rounded-full flex items-center justify-center border-2 text-sm font-bold
                                            ${mode === 'review' && showFeedback && idx === currentQ.answer ? 'border-green-600 bg-green-600 text-white' : 
                                                selectedOption === idx ? 'border-blue-500 bg-blue-500 text-white' : 'border-slate-300 text-slate-400 group-hover:border-blue-300'}
                                        `}>
                                            {String.fromCharCode(65 + idx)}
                                        </div>
                                        <span>{opt}</span>
                                    </div>
                                    {mode === 'review' && showFeedback && idx === currentQ.answer && <span className="text-green-600">✔</span>}
                                    {mode === 'review' && showFeedback && idx === selectedOption && idx !== currentQ.answer && <span className="text-red-500">✖</span>}
                                </div>
                            ))}
                        </div>
                        {mode === 'review' && showFeedback && (
                            <div className="mt-8 pt-6 border-t border-slate-100 animate-fade-in">
                                <h3 className="text-sm font-bold text-slate-500 uppercase tracking-wide mb-2">Explicación</h3>
                                <p className="text-slate-700 bg-slate-50 p-4 rounded-lg border-l-4 border-slate-400">
                                    {currentQ.explanation || "Sin explicación predefinida."}
                                </p>
                                <div className="mt-4">
                                    <button onClick={searchGoogle} className="flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-slate-800 bg-white border border-slate-200 hover:bg-slate-50 px-3 py-2 rounded-lg transition-colors">
                                        Buscar en Google
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>

                    <div className="flex justify-end">
                        <button
                            onClick={handleNext}
                            disabled={selectedOption === null}
                            className={`
                                px-8 py-3 rounded-xl font-bold shadow-lg transition-all transform
                                ${selectedOption === null 
                                    ? 'bg-slate-200 text-slate-400 cursor-not-allowed' 
                                    : 'bg-blue-600 text-white hover:bg-blue-700 hover:-translate-y-1 hover:shadow-blue-200/50'}
                            `}
                        >
                            {currentIndex === questions.length - 1 ? 'Finalizar Examen' : 'Siguiente'}
                        </button>
                    </div>
                </div>
            );
        };

        // --- COMPONENT: App ---
        const App = () => {
            const { questions, reps, loading, addQuestion, updateQuestion, deleteQuestion, updateRep, importQuestions, resetProgress, setQuestions } = useQuestionBank();
            const [mode, setMode] = useState('start');
            const [quizMode, setQuizMode] = useState('review');
            const [activeQuestions, setActiveQuestions] = useState([]);
            const [quizResults, setQuizResults] = useState([]);
            const [selectedEpi, setSelectedEpi] = useState('all');
            const [numQuestions, setNumQuestions] = useState(24);

            const epigrafes = useMemo(() => {
                return Array.from(new Set(questions.map(q => q.epigrafe))).sort((a, b) => a - b);
            }, [questions]);

            const stats = useMemo(() => {
                const total = questions.length;
                const studied = Object.keys(reps).length;
                const mastered = Object.values(reps).filter(r => r.ef > 2.5).length;
                return { total, studied, mastered };
            }, [questions, reps]);

            const startQuiz = () => {
                const now = Date.now();
                let pool = questions.filter(q => {
                    if (selectedEpi !== 'all' && q.epigrafe !== Number(selectedEpi)) return false;
                    const r = reps[q.id];
                    if (!r) return true; 
                    return r.next <= now;
                });

                if (pool.length === 0) {
                    alert("No hay preguntas pendientes para repasar en este criterio.");
                    return;
                }
                
                // Shuffle
                pool = pool.sort(() => Math.random() - 0.5).slice(0, numQuestions);
                setActiveQuestions(pool);
                setMode('quiz');
            };

            const handleQuizComplete = (results) => {
                results.forEach(r => {
                    const newRep = calculateSM2(r.question, r.correct, reps);
                    if (r.doubt) newRep.duda = true;
                    updateRep(r.question.id, newRep);
                });
                setQuizResults(results);
                setMode('results');
            };

            const downloadBackup = () => {
                const dataStr = JSON.stringify(questions, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                const exportFileDefaultName = 'questions_backup.json';
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
            };

            if (loading) return <div className="flex h-screen items-center justify-center text-slate-500">Cargando...</div>;

            return (
                <div className="min-h-screen p-4 md:p-8 bg-slate-100 font-sans">
                    <div className="max-w-4xl mx-auto">
                        {mode === 'start' && (
                            <div className="bg-white rounded-2xl shadow-xl border border-slate-200 p-8 md:p-12 animate-fade-in">
                                <header className="text-center mb-10">
                                    <h1 className="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-3">
                                        Examen TMA Parte 66
                                    </h1>
                                    <p className="text-slate-500 text-lg">Versión Local - Sin Conexión</p>
                                </header>

                                <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                                    <div className="bg-slate-50 p-4 rounded-xl text-center border border-slate-100">
                                        <span className="block text-3xl font-bold text-slate-700">{stats.total}</span>
                                        <span className="text-xs text-slate-400 uppercase font-semibold">Preguntas</span>
                                    </div>
                                    <div className="bg-blue-50 p-4 rounded-xl text-center border border-blue-100">
                                        <span className="block text-3xl font-bold text-blue-600">{stats.studied}</span>
                                        <span className="text-xs text-blue-400 uppercase font-semibold">Estudiadas</span>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-xl text-center border border-green-100">
                                        <span className="block text-3xl font-bold text-green-600">{stats.mastered}</span>
                                        <span className="text-xs text-green-400 uppercase font-semibold">Dominadas</span>
                                    </div>
                                </div>

                                <div className="space-y-6 max-w-md mx-auto">
                                    <div className="space-y-2">
                                        <label className="text-sm font-bold text-slate-700">Modo</label>
                                        <div className="flex bg-slate-100 p-1 rounded-lg">
                                            <button onClick={() => setQuizMode('review')} className={`flex-1 py-2 rounded-md text-sm font-medium transition-all ${quizMode === 'review' ? 'bg-white shadow text-blue-600' : 'text-slate-500'}`}>Repaso</button>
                                            <button onClick={() => setQuizMode('exam')} className={`flex-1 py-2 rounded-md text-sm font-medium transition-all ${quizMode === 'exam' ? 'bg-white shadow text-blue-600' : 'text-slate-500'}`}>Examen</button>
                                        </div>
                                    </div>
                                    <div className="space-y-2">
                                        <label className="text-sm font-bold text-slate-700">Epígrafe</label>
                                        <select value={selectedEpi} onChange={(e) => setSelectedEpi(e.target.value)} className="w-full p-3 bg-white border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none">
                                            <option value="all">Todos</option>
                                            {epigrafes.map(e => <option key={e} value={e}>Epígrafe {e}</option>)}
                                        </select>
                                    </div>
                                    <div className="space-y-2">
                                        <label className="text-sm font-bold text-slate-700">Cantidad</label>
                                        <input type="number" min="5" max="100" value={numQuestions} onChange={(e) => setNumQuestions(Number(e.target.value))} className="w-full p-3 bg-white border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none" />
                                    </div>
                                    <button onClick={startQuiz} className="w-full py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all">
                                        Comenzar Práctica
                                    </button>
                                    <div className="grid grid-cols-2 gap-4 mt-4">
                                        <button onClick={() => setMode('admin')} className="text-slate-500 text-sm hover:text-slate-800">⚙️ Admin</button>
                                        <button onClick={() => {if(window.confirm("¿Resetear todo?")) resetProgress()}} className="text-red-400 text-sm hover:text-red-600">↺ Reset</button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {mode === 'quiz' && <QuizScreen questions={activeQuestions} mode={quizMode} reps={reps} onComplete={handleQuizComplete} onExit={() => setMode('start')} />}

                        {mode === 'results' && (
                            <div className="bg-white rounded-2xl shadow-xl border border-slate-200 p-8 animate-fade-in">
                                <div className="text-center mb-8">
                                    <h2 className="text-3xl font-bold text-slate-800 mb-2">Resultados</h2>
                                    <div className="text-6xl font-black text-blue-600 mb-4">
                                        {Math.round((quizResults.filter(r => r.correct).length / quizResults.length) * 100)}%
                                    </div>
                                    <p className="text-slate-500">{quizResults.filter(r => r.correct).length} correctas de {quizResults.length}</p>
                                </div>
                                <div className="flex justify-center gap-4">
                                    <button onClick={() => setMode('start')} className="px-6 py-3 bg-slate-200 text-slate-700 font-bold rounded-xl hover:bg-slate-300">Volver</button>
                                </div>
                            </div>
                        )}

                        {mode === 'admin' && <AdminPanel questions={questions} onImport={importQuestions} onDeleteAll={() => setQuestions([])} onDeleteEpigrafe={(epi) => setQuestions(questions.filter(q => q.epigrafe !== epi))} onDeleteQuestion={deleteQuestion} onUpdateQuestion={updateQuestion} onExport={downloadBackup} onBack={() => setMode('start')} />}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
<script type="module" src="/index.tsx"></script>

</body></html>